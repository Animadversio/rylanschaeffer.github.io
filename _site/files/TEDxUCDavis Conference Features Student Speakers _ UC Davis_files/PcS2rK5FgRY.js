/*1461794213,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["KXE5Q"]); }

__d("VideoChainingCaller",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={INTERNAL:"internal",WWW_FEED_PIVOTS:"www_feed_pivots",WWW_FEED_SNOWLIFT:"www_feed_snowlift",MISC_PHOTO_SET:"misc_photo_set",MOBILE:"mobile",SEARCH:"search",WWW_FEED_RHC:"www_feed_rhc",WWW_PERMALINK:"www_permalink",MY_VIDEO_CHANNELS_ENT_QUERY:"my_video_channels_ent_query",TOP_FOLLOWED_VIDEO_CHANNELS_ENT_QUERY:"top_followed_video_channels_ent_query",BADGE:"badge",PAGINATION:"pagination",SUBTITLE:"subtitle",CHANNEL_VIEW_FROM_UNKNOWN:"channel_view_from_unknown",CHANNEL_VIEW_FROM_NEWSFEED:"channel_view_from_newsfeed",CHANNEL_VIEW_FROM_SEARCH:"channel_view_from_search",CHANNEL_VIEW_FROM_NEWSFEED_PIVOT:"channel_view_from_newsfeed_pivot",NEWSFEED_PIVOT_INLINE:"newsfeed_pivot_inline",CHANNEL_VIEW_FROM_PAGE_CALL_TO_ACTION:"channel_view_from_page_call_to_action",CHANNEL_VIEW_FROM_PAGE_TIMELINE:"channel_view_from_page_timeline",CHANNEL_VIEW_FROM_PAGE_TIMELINE_FEATURED:"channel_view_from_page_timeline_featured",CHANNEL_VIEW_FROM_PAGE_VIDEO_TAB:"channel_view_from_page_video_tab",CHANNEL_VIEW_FROM_USER_TIMELINE:"channel_view_from_user_timeline",CHANNEL_VIEW_FROM_USER_VIDEO_TAB:"channel_view_from_user_video_tab",CHANNEL_VIEW_FROM_GROUP_TIMELINE:"channel_view_from_group_timeline",CHANNEL_VIEW_FROM_GROUP_VIDEO_TAB:"channel_view_from_group_video_tab",CHANNEL_VIEW_FROM_SAVED_STORY:"channel_view_from_saved_story",SAVED_STORY_INLINE:"saved_story_inline",CHANNEL_VIEW_FROM_SHARED_WITH_YOU_STORY:"channel_view_from_shared_with_you_story",SHARED_WITH_YOU_STORY_INLINE:"shared_with_you_story_inline",CHANNEL_VIEW_FROM_LATEST_FROM_YOUR_CHANNELS_STORY:"channel_view_from_latest_from_your_channels_story",LATEST_FROM_YOUR_CHANNELS_STORY_INLINE:"latest_from_your_channels_story_inline",CHANNEL_VIEW_FROM_CHANNEL_PIVOT:"channel_view_from_channel_pivot",CHANNEL_PIVOT_INLINE:"channel_pivot_inine",CHANNEL_VIEW_FROM_CHANNEL_RECOMMENDED_CHANNEL_STORY:"channel_view_from_recommended_channel_story",RECOMMENDED_CHANNEL_STORY_INLINE:"recommended_channel_story_inline",CHANNEL_VIEW_FROM_VIDEO_HOME:"channel_view_from_video_home",VIDEO_HOME_INLINE:"video_home_inline",VIDEO_HOME_FEED:"video_home_feed",FEED_SURVEY_SWIPE:"feed_survey_swipe",FEED_PIVOTS_INLINE:"feed_pivots_inline",CHANNEL_VIEW_FROM_FEED_PIVOTS:"channel_view_from_feed_pivots",VIDEO_SETS_CACHE_REFRESH:"video_sets_cache_refresh",VIDEO_SETS_CACHE_CHECK:"video_sets_cache_check",DUMMY_STORY_RECOMMENDED_VIDEOS:"dummy_story_recommended_videos",DUMMY_STORY_FRIENDS_ENJOYING:"dummy_story_friends_enjoying",DUMMY_STORY_FRIENDS_ENJOYING_NOW:"dummy_story_friends_enjoying_now",DUMMY_STORY_DUMMY_ACTION:"dummy_story_dummy_action",OCULUS_VIDEO:"oculus_video",TRENDING_DEMOGRAPHICS_LIVE:"trending_demographics_live",LIVE_MAP:"live_map"};},null);
__d("VideoChannelLoggerEventTargets",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CLOSE:"close",WASH:"wash",PREVIOUS_ARROW:"previous_arrow",PREVIOUS_ARROW_KEY:"previous_arrow_key",NEXT_ARROW:"next_arrow",NEXT_ARROW_KEY:"next_arrow_key",UP_NEXT:"up_next",THUMBNAIL:"thumbnail",SHOW_SIDE_PANE:"show_side_pane",HIDE_SIDE_PANE:"hide_side_pane",SHARE:"share",BACK:"back",WNS:"wns",STORY_HEADER:"story_header",SECONDARY_ACTION:"secondary_action",FULLSCREEN:"fullscreen",STORY_DESCRIPTION:"story_description",ACTION_LINK:"action_link",UFI_COUNTS:"ufi_counts",LIKE:"like",COMMENT:"comment",STORY:"story"};},null);
__d("VideoChannelRequestStatus",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SUCCEEDED:"succeeded",FAILED:"failed",ABORTED:"aborted"};},null);
__d("VideoHomeRequestStatus",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SUCCEEDED:"succeeded",FAILED:"failed",ABORTED:"aborted"};},null);
__d('StepperAnimation',['invariant','Animation','mixInEventEmitter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={done:true,go:true},j=function(n){!!n?h(0):void 0;};function k(n){'use strict';this.$StepperAnimation1=new (c('Animation'))(n);this.$StepperAnimation1.ondone(this.emit.bind(this,'done'));this.__fired__=false;}k.prototype.from=function(){'use strict';this.$StepperAnimation1.from.apply(this.$StepperAnimation1,arguments);return this;};k.prototype.to=function(){'use strict';this.$StepperAnimation1.to.apply(this.$StepperAnimation1,arguments);return this;};k.prototype.ease=function(){'use strict';this.$StepperAnimation1.ease.apply(this.$StepperAnimation1,arguments);return this;};k.prototype.go=function(){'use strict';j(this.__fired__);this.__fired__=true;this.$StepperAnimation1.go();this.emit('go');return this;};k.prototype.checkpoint=function(){'use strict';this.$StepperAnimation1.checkpoint.apply(this.$StepperAnimation1,arguments);return this;};k.prototype.show=function(){'use strict';this.$StepperAnimation1.show.apply(this.$StepperAnimation1,arguments);return this;};k.prototype.duration=function(){'use strict';this.$StepperAnimation1.duration.apply(this.$StepperAnimation1,arguments);return this;};k.prototype.stop=function(){'use strict';this.$StepperAnimation1.stop.apply(this.$StepperAnimation1,arguments);return this;};function l(n){'use strict';this.$SerialAnimations1=n||[];this.$SerialAnimations2=0;for(var o=0,p=n.length;o<p;o++){var q=n[o+1];if(q)n[o].addListener('done',q.go.bind(q));}if(this.$SerialAnimations1.length){var r=this.emit.bind(this,'go');this.$SerialAnimations1[0].addListener('go',r);var s=this.emit.bind(this,'done');this.$SerialAnimations1.slice(-1)[0].addListener('done',s);}}l.prototype.go=function(){'use strict';j(this.__fired__);this.__fired__=true;this.$SerialAnimations1.length&&this.$SerialAnimations1[0].go();this.emit('go');return this;};l.prototype.stop=function(){'use strict';for(var n=0,o=this.$SerialAnimations1.length;n<o;n++)this.$SerialAnimations1[n].stop.apply(this.$SerialAnimations1[n],arguments);return this;};l.prototype.duration=function(){'use strict';for(var n=0,o=this.$SerialAnimations1.length;n<o;n++)this.$SerialAnimations1[n].duration.apply(this.$SerialAnimations1[n],arguments);return this;};function m(n){'use strict';this.$ParallelAnimations1=n||[];this.$ParallelAnimations2=0;for(var o=0;o<n.length;o++)n[o].addListener('done',this.$ParallelAnimations3.bind(this));}m.prototype.$ParallelAnimations3=function(){'use strict';if(++this.$ParallelAnimations2===this.$ParallelAnimations1.length)this.emit('done');};m.prototype.go=function(){'use strict';j(this.__fired__);this.__fired__=true;for(var n=0;n<this.$ParallelAnimations1.length;n++)this.$ParallelAnimations1[n].go();this.emit('go');return this;};m.prototype.stop=function(){'use strict';for(var n=0,o=this.$ParallelAnimations1.length;n<o;n++)this.$ParallelAnimations1[n].stop.apply(this.$ParallelAnimations1[n],arguments);return this;};m.prototype.duration=function(){'use strict';for(var n=0,o=this.$ParallelAnimations1.length;n<o;n++)this.$ParallelAnimations1[n].duration.apply(this.$ParallelAnimations1[n],arguments);return this;};c('mixInEventEmitter')(k,i);c('mixInEventEmitter')(l,i);c('mixInEventEmitter')(m,i);k.Serial=l;k.Parallel=m;f.exports=k;},null);
__d('XUICarouselAnimator',['cx','StepperAnimation','Ease','Style','Locale'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=0,j=1,k=['vertical','horizontal','showcase'];function l(m){var n=m.type,o=m.centered,p=m.firstAndLastAligned;n=n===undefined?'horizontal':n;var q=this.$XUICarouselAnimator1=n==='showcase',r=this.$XUICarouselAnimator2=n==='horizontal',s=this.$XUICarouselAnimator3=n==='vertical';this.$XUICarouselAnimator4=!!o;this.$XUICarouselAnimator5=!!p;this.$XUICarouselAnimator6=(q?"_9bn":'')+(s?' '+"_9bo":'')+(r?' '+"_9bp":'');}l.prototype.update=function(m){if(this.$XUICarouselAnimator1){this.$XUICarouselAnimator7(m);}else this.$XUICarouselAnimator8(m);};l.prototype.createAnimation=function(m){var n=m.nextIndex,o=m.items;if(n>=0&&n<o.length)if(this.$XUICarouselAnimator1){return this.$XUICarouselAnimator9(m);}else return this.$XUICarouselAnimator10(m);};l.prototype.getCSSClassForRoot=function(){return this.$XUICarouselAnimator6;};l.prototype.getViewportHeight=function(m){return this.$XUICarouselAnimator11(m);};l.prototype.getViewportWidth=function(m){return this.$XUICarouselAnimator12(m);};l.prototype.getContainerHeight=function(m){return this.$XUICarouselAnimator3?this.$XUICarouselAnimator13(m):this.$XUICarouselAnimator11(m);};l.prototype.getContainerWidth=function(m){return this.$XUICarouselAnimator2?this.$XUICarouselAnimator14(m):this.$XUICarouselAnimator12(m);};l.prototype.getMaxIndexForNextArrow=function(m){var n=m.viewport,o=m.items,p=o.length-1;if(!this.$XUICarouselAnimator5||!n)return p-1;var q=this.$XUICarouselAnimator15(),r=this.$XUICarouselAnimator16(m,q),s=this.$XUICarouselAnimator17(m,q);if(r<0)return p;var t=0;for(var u=0;u<s.length;u++){t+=s[u];if(t>=r)return u;}return p;};l.prototype.remove=function(m){if(this.$XUICarouselAnimator1){this.$XUICarouselAnimator18(m);}else this.$XUICarouselAnimator19(m);};l.prototype.$XUICarouselAnimator18=function(m){var n=m.items;for(var o=0,p=n.length;o<p;o++){var q=n[o];c('Style').set(q,'opacity',1);c('Style').set(q,'left','auto');c('Style').set(q,'top','auto');c('Style').set(q,'position','static');}};l.prototype.$XUICarouselAnimator19=function(m){var n=this.$XUICarouselAnimator2?'margin-left':'margin-top';c('Style').set(m.container,n,0);};l.prototype.$XUICarouselAnimator7=function(m){var n=m.items,o=m.index;this.$XUICarouselAnimator20(m,n,o);};l.prototype.$XUICarouselAnimator20=function(m,n,o){c('Style').set(m.container,'marginTop',0);c('Style').set(m.container,'marginLeft',0);for(var p=0,q=n.length;p<q;p++){var r=n[p];c('Style').set(r,'opacity',p===o?1:0);c('Style').set(r,'position','absolute');this.$XUICarouselAnimator21(m,r);}};l.prototype.$XUICarouselAnimator8=function(m){var n=m.index,o=m.container;this.$XUICarouselAnimator22(m,n,o);};l.prototype.$XUICarouselAnimator22=function(m,n,o){var p=this.$XUICarouselAnimator2?'margin-left':'margin-top',q=this.$XUICarouselAnimator23(m,n);c('Style').set(o,p,q+'px');};l.prototype.$XUICarouselAnimator23=function(m,n){var o=this.$XUICarouselAnimator15(),p=this.$XUICarouselAnimator16(m,o),q=this.$XUICarouselAnimator24(m,n),r=-Math.min(p,q),s=this.$XUICarouselAnimator25(m,n);return r+s;};l.prototype.$XUICarouselAnimator24=function(m,n){var o=m.items,p=o[n],q=0;if(p){var r,s;if(this.$XUICarouselAnimator2){r='marginLeft';s=this.$XUICarouselAnimator26;}else{r='marginTop';s=this.$XUICarouselAnimator27;}for(var t=0;t<n;t++)q+=s.call(this,o[t]);q+=parseInt(c('Style').get(p,r),10);}return q;};l.prototype.$XUICarouselAnimator9=function(m){var n=m.nextIndex,o=m.items,p=m.curIndex,q=o[p],r=o[n],s=c('Style').get(q,'opacity'),t=null;if(m.animate){t=new (c('StepperAnimation').Parallel)([new (c('StepperAnimation'))(q).from('opacity',s).to('opacity',0).ease(c('Ease').sineInOut),new (c('StepperAnimation'))(r).from('opacity',0).to('opacity',1).ease(c('Ease').sineInOut)]);}else this.$XUICarouselAnimator20(m,o,n);return t;};l.prototype.$XUICarouselAnimator21=function(m,n){if(this.$XUICarouselAnimator4){var o=m.viewport,p=o.offsetWidth,q=o.offsetHeight,r=this.$XUICarouselAnimator28(n,i),s=this.$XUICarouselAnimator28(n,j);c('Style').set(n,'left',(p-r)/2+'px');c('Style').set(n,'top',(q-s)/2+'px');}else{c('Style').set(n,'left',0);c('Style').set(n,'top','auto');}};l.prototype.$XUICarouselAnimator10=function(m){var n=m.container,o=m.nextIndex,p;if(this.$XUICarouselAnimator2){p=c('Locale').isRTL()?'margin-right':'margin-left';}else p='margin-top';var q=this.$XUICarouselAnimator23(m,o),r=new (c('StepperAnimation'))(n);if(m.animate){r.from(p,c('Style').get(n,p)).to(p,q+'px').ease(c('Ease').sineInOut);}else this.$XUICarouselAnimator22(m,o,n);return r;};l.prototype.$XUICarouselAnimator25=function(m,n){var o=m.viewport,p=m.items,q=p[n];if(this.$XUICarouselAnimator5)if(n===0||n===m.items.length-1)return 0;if(this.$XUICarouselAnimator4){if(this.$XUICarouselAnimator2)return (o.offsetWidth-q.offsetWidth)/2;if(this.$XUICarouselAnimator3)return (o.offsetHeight-q.offsetHeight)/2;}return 0;};l.prototype.$XUICarouselAnimator11=function(m){return this.$XUICarouselAnimator29(m,j);};l.prototype.$XUICarouselAnimator12=function(m){return this.$XUICarouselAnimator29(m,i);};l.prototype.$XUICarouselAnimator29=function(m,n){return Math.max.apply(null,this.$XUICarouselAnimator17(m,n));};l.prototype.$XUICarouselAnimator27=function(m){return this.$XUICarouselAnimator28(m,j);};l.prototype.$XUICarouselAnimator26=function(m){return this.$XUICarouselAnimator28(m,i);};l.prototype.$XUICarouselAnimator28=function(m,n){var o,p,q,r=m.style.position;c('Style').set(m,'position','static');if(n===i){o='offsetWidth';p='marginLeft';q='marginRight';}else{o='offsetHeight';p='marginTop';q='marginBottom';}p=parseInt(c('Style').get(m,p),10);q=parseInt(c('Style').get(m,q),10);var s=m[o]+p+q;c('Style').set(m,'position',r);return s;};l.prototype.$XUICarouselAnimator13=function(m){return this.$XUICarouselAnimator30(m,j);};l.prototype.$XUICarouselAnimator14=function(m){return this.$XUICarouselAnimator30(m,i);};l.prototype.$XUICarouselAnimator17=function(m,n){return m.items.map(function(o){return this.$XUICarouselAnimator28(o,n);}.bind(this));};l.prototype.$XUICarouselAnimator30=function(m,n){var o=this.$XUICarouselAnimator17(m,n);return o.reduce(function(p,q){return p+q;},0);};l.prototype.$XUICarouselAnimator16=function(m,n){if(!this.$XUICarouselAnimator5)return Infinity;var o=m.viewport,p=this.$XUICarouselAnimator30(m,n),q=n===i?o.offsetWidth:o.offsetHeight;return p-q;};l.prototype.$XUICarouselAnimator15=function(){return this.$XUICarouselAnimator2?i:j;};f.exports=l;},null);
__d('XUICarousel.react',['cx','fbt','ArbiterMixin','React','ReactDOM','ReactChildren','ReactComponentWithPureRenderMixin','XUICarouselAnimator','joinClasses'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k='`arrows` must be an array of [<prevArrow/>, <nextArrow/>] or null',l='prev',m='next',n=c('React').createClass({displayName:'XUICarousel',mixins:[c('ArbiterMixin'),c('ReactComponentWithPureRenderMixin')],propTypes:{arrows:function(p,q){var r=p[q];if(r){if(!Array.isArray(r)||r.length!==2)return new Error(k);var s=r[0],t=r[1];if(!c('React').isValidElement(s)||!c('React').isValidElement(t))return new Error(k);}},animator:j.shape({createAnimation:j.func.isRequired,getCSSClassForRoot:j.func.isRequired,getViewportWidth:j.func.isRequired,getViewportHeight:j.func.isRequired,getContainerWidth:j.func.isRequired,getContainerHeight:j.func.isRequired,update:j.func.isRequired,remove:j.func.isRequired}).isRequired,initialIndex:j.number,moveStep:j.number,animationDuration:j.number,initialAutoplay:j.bool,wrapAround:j.bool,autoplayDirection:j.oneOf(['forward','backward']),stopAutoplayOnHover:j.bool,autoplayInterval:j.number,resizeViewport:j.oneOf(['disabled','fixed','dynamic']),viewportWidth:j.number,viewportHeight:j.number,onItemClick:j.func},getDefaultProps:function(){return {animator:new (c('XUICarouselAnimator'))({type:'horizontal',centered:true,firstAndLastAligned:false}),initialIndex:0,moveStep:1,animationDuration:200,initialAutoplay:true,autoplayInterval:5000,autoplayDirection:'forward',stopAutoplayOnHover:true,resizeViewport:'fixed',wrapAround:true};},getInitialState:function(){return {index:this.props.initialIndex,autoplay:this.props.initialAutoplay,containerWidth:0,animatorClassForRoot:this.props.animator.getCSSClassForRoot(),containerHeight:0,viewportWidth:'auto',viewportHeight:'auto'};},getItemCount:function(){return c('ReactChildren').count(this.props.children);},_getItems:function(){var p=this.getItemCount(),q=[];for(var r=0;r<p;r++)if(this.refs.itemsContainer&&this.refs.itemsContainer.childNodes[r])q[r]=this.refs.itemsContainer.childNodes[r];return q;},_getContextForAnimator:function(){return {container:c('ReactDOM').findDOMNode(this.refs.itemsContainer),items:this._getItems().map(function(p){return c('ReactDOM').findDOMNode(p);}),viewport:c('ReactDOM').findDOMNode(this.refs.viewport)};},componentDidMount:function(){var p=this.props.animator,q=this._getContextForAnimator();this.setState({containerWidth:p.getContainerWidth(q),containerHeight:p.getContainerHeight(q),viewportWidth:p.getViewportWidth(q),viewportHeight:p.getViewportHeight(q)});p.update(babelHelpers['extends']({},q,{index:this.state.index}));if(this.state.autoplay)this._autoplay();},componentWillMount:function(){this._isHovering=false;this._autoplayInterval=null;this._animation=null;},componentWillUnmount:function(){this._stopCurrentAnimation();this._stopAutoplay();},componentWillUpdate:function(p,q){var r=o(this.props,p),s=o(this.state,q),t=this._getContextForAnimator();if(p.children.length<q.index)this.setState({index:0});var u=p.animator;if(r.animator){this._stopCurrentAnimation();this.props.animator.remove(t);}var v,w=this.state.index;if(this._prevReactItems){var x=c('ReactChildren').map(p.children,function(y){return y.props.childIndex;});w=Math.max(x.indexOf(this._prevReactItems[this.state.index]),0);}if(this.state.index!==w)this._nextIndex=w;if(s.index){this.inform('animation_start',q.index);if(this._animation)this._animation.stop();v=u.createAnimation(babelHelpers['extends']({},t,{nextIndex:q.index,curIndex:w,animate:!this._nextIndex}));this._animation=v;v.duration(p.animationDuration);v.addListener('done',this._onAnimationDone.bind(this,q.index));v.go();}if(s.autoplay||r.autoplayInterval||r.autoplayDirection){this._stopAutoplay();if(q.autoplay&&(!this._isHovering||!p.stopAutoplayOnHover))this._autoplay();}this._prevReactItems=c('ReactChildren').map(this.props.children,function(y){return y.props.childIndex;});},componentDidUpdate:function(p,q){var r=this.props.animator,s=this._getContextForAnimator(),t=false,u=false,v=false,w=this._prevItems,x=this._getItems(),y=!w||w.length!==x.length||!w.every(function(z,aa){return z===x[aa];});if(this._nextIndex){this.setState({index:this._nextIndex});this._nextIndex=null;}if(y){v=true;t=true;u=this.props.resizeViewport==='dynamic';this.inform('item_count_updated',this.getItemCount());}if(r!==p.animator){this.setState({animatorClassForRoot:r.getCSSClassForRoot()});t=true;v=true;}if(p.resizeViewport!==this.props.resizeViewport){u=p.resizeViewport==='disabled'||this.props.resizeViewport==='dynamic';t=true;}if(v)this.setState({containerWidth:r.getContainerWidth(s),containerHeight:r.getContainerHeight(s)});if(u)this.setState({viewportWidth:r.getViewportWidth(s),viewportHeight:r.getViewportHeight(s)});if(t)r.update(babelHelpers['extends']({},s,{index:this.state.index}));},setAutoplayEnabled:function(p){this.setState({autoplay:p});},_autoplay:function(){if(!this._autoplayInterval){var p=this.props.autoplayDirection==='forward'?this.next:this.prev;this._autoplayInterval=setInterval(p,this.props.autoplayInterval);}},_stopAutoplay:function(){clearInterval(this._autoplayInterval);this._autoplayInterval=null;},_stopCurrentAnimation:function(){if(this._animation){this._animation.stop();this._animation=null;}},_onAnimationDone:function(p){this._animation=null;this.inform('animationEnd',p);},_onMouseEnter:function(){this._isHovering=true;if(this.props.stopAutoplayOnHover)this._stopAutoplay();},_onMouseLeave:function(){this._isHovering=false;if(this.state.autoplay)this._autoplay();},setIndex:function(p){if(p>=0&&p<this.props.children.length){this.setState({index:p});this._stopAutoplay();if(this.state.autoplay)this._autoplay();return true;}return false;},next:function(){var p=this.state.index,q=this.getItemCount(),r=q-1;if((p!==r||p===r&&this.props.wrapAround)&&q){var s=p===r?0:Math.min(r,p+this.props.moveStep);this.setIndex(s);}},prev:function(){var p=this.state.index,q=this.getItemCount();if(p!==0||p===0&&this.props.wrapAround){var r=p===0?q-1:Math.max(p-this.props.moveStep,0);this.setIndex(r);}},_renderChildren:function(){return c('ReactChildren').map(this.props.children,function(p,q){return (c('React').cloneElement(p,{ref:p.props.childIndex,index:q,onClick:function(){if(this.props.onItemClick){this.props.onItemClick(q);}else this.setIndex(q);}.bind(this),selected:q===this.state.index}));}.bind(this));},_shouldRenderNextArrow:function(){var p=this.props,q=p.wrapAround,r=p.animator;if(q)return true;var s=this._getContextForAnimator();return this.state.index<=r.getMaxIndexForNextArrow(s);},_renderArrows:function(){if(this.props.arrows){var p=this.props.arrows,q=p[0],r=p[1];q=c('React').cloneElement(q,{key:l,onClick:q.props.onClick?q.props.onClick:this.prev,disabled:!this.props.wrapAround&&this.state.index===0,className:c('joinClasses')("_50z1",q.props.className),"aria-label":i._("Previous")});r=c('React').cloneElement(r,{key:m,onClick:r.props.onClick?r.props.onClick:this.next,disabled:!this._shouldRenderNextArrow(),className:c('joinClasses')("_50z2",r.props.className),"aria-label":i._("Next")});return [q,r];}return null;},render:function(){var p=this.props,q=p.className,r=p.viewportWidth,s=p.viewportHeight,t=p.resizeViewport;q=c('joinClasses')(q,this.state.animatorClassForRoot,"_50z3"+(this.state.animating?' '+"_50zi":''));var u={height:s,width:r};if(t!=='disabled'){u.width=r||this.state.viewportWidth;u.height=s||this.state.viewportHeight;}return (c('React').createElement('div',{className:q},c('React').createElement('div',{className:"_50zm",ref:'viewport',onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave,style:babelHelpers['extends']({},u,{overflow:'hidden'})},c('React').createElement('div',{style:{width:this.state.viewportWidth||'auto',height:this.state.viewportHeight||'auto'}},c('React').createElement('div',{className:"_50zn clearfix",style:{width:this.state.containerWidth||'auto',height:this.state.containerHeight||'auto'},ref:'itemsContainer'},this._renderChildren())),this._renderArrows())));}});function o(p,q){var r={};for(var s in p)if(p.hasOwnProperty(s))r[s]=p[s]!==q[s];for(var t in q)if(q.hasOwnProperty(t)&&!r.hasOwnProperty(t))r[t]=p[t]!==q[t];return r;}f.exports=n;},null);
__d('XUICarouselArrow.react',['cx','Link.react','React','joinClasses'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'XUICarouselArrow',propTypes:{onClick:i.func,disabled:i.bool},render:function(){var k=this.props,l=k.children,m=k.className,n=k.disabled,o=k.onClick;m=c('joinClasses')(m,"_-op"+(n?' '+"_-oq":''));return (c('React').createElement(c('Link.react'),{className:m,onClick:o},l));}});f.exports=j;},null);
__d('XUICarouselItem.react',['cx','React','joinClasses'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'XUICarouselItem',propTypes:{selected:i.bool},render:function(){var k=this.props,l=k.children,m=k.className,n=k.selected,o=babelHelpers.objectWithoutProperties(k,['children','className','selected']);m=c('joinClasses')(m,"_3el6"+(n?' '+"_3el7":''));return (c('React').createElement('div',{className:"_3el8 clearfix"},c('React').createElement('div',babelHelpers['extends']({},o,{className:m}),l)));}});f.exports=j;},null);
__d('ReactCSSTransitionGroupChild',['React','ReactDOM','CSSCore','ReactTransitionEvents','onlyChild'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=17,i=c('React').createClass({displayName:'ReactCSSTransitionGroupChild',propTypes:{name:c('React').PropTypes.oneOfType([c('React').PropTypes.string,c('React').PropTypes.shape({enter:c('React').PropTypes.string,leave:c('React').PropTypes.string,active:c('React').PropTypes.string}),c('React').PropTypes.shape({enter:c('React').PropTypes.string,enterActive:c('React').PropTypes.string,leave:c('React').PropTypes.string,leaveActive:c('React').PropTypes.string,appear:c('React').PropTypes.string,appearActive:c('React').PropTypes.string})]).isRequired,appear:c('React').PropTypes.bool,enter:c('React').PropTypes.bool,leave:c('React').PropTypes.bool,appearTimeout:c('React').PropTypes.number,enterTimeout:c('React').PropTypes.number,leaveTimeout:c('React').PropTypes.number},transition:function(j,k,l){var m=c('ReactDOM').findDOMNode(this);if(!m){if(k)k();return;}var n=this.props.name[j]||this.props.name+'-'+j,o=this.props.name[j+'Active']||n+'-active',p=null,q=function(r){if(r&&r.target!==m)return;clearTimeout(p);c('CSSCore').removeClass(m,n);c('CSSCore').removeClass(m,o);c('ReactTransitionEvents').removeEndEventListener(m,q);if(k)k();};c('CSSCore').addClass(m,n);this.queueClass(o);if(l){p=setTimeout(q,l);this.transitionTimeouts.push(p);}else c('ReactTransitionEvents').addEndEventListener(m,q);},queueClass:function(j){this.classNameQueue.push(j);if(!this.timeout)this.timeout=setTimeout(this.flushClassNameQueue,h);},flushClassNameQueue:function(){if(this.isMounted())this.classNameQueue.forEach(c('CSSCore').addClass.bind(c('CSSCore'),c('ReactDOM').findDOMNode(this)));this.classNameQueue.length=0;this.timeout=null;},componentWillMount:function(){this.classNameQueue=[];this.transitionTimeouts=[];},componentWillUnmount:function(){if(this.timeout)clearTimeout(this.timeout);this.transitionTimeouts.forEach(function(j){clearTimeout(j);});},componentWillAppear:function(j){if(this.props.appear){this.transition('appear',j,this.props.appearTimeout);}else j();},componentWillEnter:function(j){if(this.props.enter){this.transition('enter',j,this.props.enterTimeout);}else j();},componentWillLeave:function(j){if(this.props.leave){this.transition('leave',j,this.props.leaveTimeout);}else j();},render:function(){return c('onlyChild')(this.props.children);}});f.exports=i;},null);
__d('ReactTransitionChildMapping',['flattenChildren'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={getChildMapping:function(i){if(!i)return i;return c('flattenChildren')(i);},mergeChildMappings:function(i,j){i=i||{};j=j||{};function k(s){if(j.hasOwnProperty(s)){return j[s];}else return i[s];}var l={},m=[];for(var n in i)if(j.hasOwnProperty(n)){if(m.length){l[n]=m;m=[];}}else m.push(n);var o,p={};for(var q in j){if(l.hasOwnProperty(q))for(o=0;o<l[q].length;o++){var r=l[q][o];p[l[q][o]]=k(r);}p[q]=k(q);}for(o=0;o<m.length;o++)p[m[o]]=k(m[o]);return p;}};f.exports=h;},null);
__d('ReactTransitionGroup',['React','ReactTransitionChildMapping','emptyFunction'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'ReactTransitionGroup',propTypes:{component:c('React').PropTypes.any,childFactory:c('React').PropTypes.func},getDefaultProps:function(){return {component:'span',childFactory:c('emptyFunction').thatReturnsArgument};},getInitialState:function(){return {children:c('ReactTransitionChildMapping').getChildMapping(this.props.children)};},componentWillMount:function(){this.currentlyTransitioningKeys={};this.keysToEnter=[];this.keysToLeave=[];},componentDidMount:function(){var i=this.state.children;for(var j in i)if(i[j])this.performAppear(j);},componentWillReceiveProps:function(i){var j=c('ReactTransitionChildMapping').getChildMapping(i.children),k=this.state.children;this.setState({children:c('ReactTransitionChildMapping').mergeChildMappings(k,j)});var l;for(l in j){var m=k&&k.hasOwnProperty(l);if(j[l]&&!m&&!this.currentlyTransitioningKeys[l])this.keysToEnter.push(l);}for(l in k){var n=j&&j.hasOwnProperty(l);if(k[l]&&!n&&!this.currentlyTransitioningKeys[l])this.keysToLeave.push(l);}},componentDidUpdate:function(){var i=this.keysToEnter;this.keysToEnter=[];i.forEach(this.performEnter);var j=this.keysToLeave;this.keysToLeave=[];j.forEach(this.performLeave);},performAppear:function(i){this.currentlyTransitioningKeys[i]=true;var j=this.refs[i];if(j.componentWillAppear){j.componentWillAppear(this._handleDoneAppearing.bind(this,i));}else this._handleDoneAppearing(i);},_handleDoneAppearing:function(i){var j=this.refs[i];if(j.componentDidAppear)j.componentDidAppear();delete this.currentlyTransitioningKeys[i];var k=c('ReactTransitionChildMapping').getChildMapping(this.props.children);if(!k||!k.hasOwnProperty(i))this.performLeave(i);},performEnter:function(i){this.currentlyTransitioningKeys[i]=true;var j=this.refs[i];if(j.componentWillEnter){j.componentWillEnter(this._handleDoneEntering.bind(this,i));}else this._handleDoneEntering(i);},_handleDoneEntering:function(i){var j=this.refs[i];if(j.componentDidEnter)j.componentDidEnter();delete this.currentlyTransitioningKeys[i];var k=c('ReactTransitionChildMapping').getChildMapping(this.props.children);if(!k||!k.hasOwnProperty(i))this.performLeave(i);},performLeave:function(i){this.currentlyTransitioningKeys[i]=true;var j=this.refs[i];if(j.componentWillLeave){j.componentWillLeave(this._handleDoneLeaving.bind(this,i));}else this._handleDoneLeaving(i);},_handleDoneLeaving:function(i){var j=this.refs[i];if(j.componentDidLeave)j.componentDidLeave();delete this.currentlyTransitioningKeys[i];var k=c('ReactTransitionChildMapping').getChildMapping(this.props.children);if(k&&k.hasOwnProperty(i)){this.performEnter(i);}else this.setState(function(l){var m=Object.assign({},l.children);delete m[i];return {children:m};});},render:function(){var i=[];for(var j in this.state.children){var k=this.state.children[j];if(k)i.push(c('React').cloneElement(this.props.childFactory(k),{ref:j,key:j}));}return c('React').createElement(this.props.component,this.props,i);}});f.exports=h;},null);
__d('ReactCSSTransitionGroup',['React','ReactTransitionGroup','ReactCSSTransitionGroupChild'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(j){var k='transition'+j+'Timeout',l='transition'+j;return function(m){if(m[l])if(m[k]==null){return new Error(k+' wasn\'t supplied to ReactCSSTransitionGroup: '+'this can cause unreliable animations and won\'t be supported in '+'a future version of React. See '+'https://fb.me/react-animation-transition-group-timeout for more '+'information.');}else if(typeof m[k]!=='number')return new Error(k+' must be a number (in milliseconds)');};}var i=c('React').createClass({displayName:'ReactCSSTransitionGroup',propTypes:{transitionName:c('ReactCSSTransitionGroupChild').propTypes.name,transitionAppear:c('React').PropTypes.bool,transitionEnter:c('React').PropTypes.bool,transitionLeave:c('React').PropTypes.bool,transitionAppearTimeout:h('Appear'),transitionEnterTimeout:h('Enter'),transitionLeaveTimeout:h('Leave')},getDefaultProps:function(){return {transitionAppear:false,transitionEnter:true,transitionLeave:true};},_wrapChild:function(j){return c('React').createElement(c('ReactCSSTransitionGroupChild'),{name:this.props.transitionName,appear:this.props.transitionAppear,enter:this.props.transitionEnter,leave:this.props.transitionLeave,appearTimeout:this.props.transitionAppearTimeout,enterTimeout:this.props.transitionEnterTimeout,leaveTimeout:this.props.transitionLeaveTimeout},j);},render:function(){return c('React').createElement(c('ReactTransitionGroup'),Object.assign({},this.props,{childFactory:this._wrapChild}));}});f.exports=i;},null);
__d("VideoChannel",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=null,i={get:function(){return h;},set:function(j){h=j;}};f.exports=i;},null);
__d('StreamingReactionsTrayEvents',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='streamingReactionsTray/AddReactionAnimate',i='streamingReactionsTray/HideChannelViewDetails',j='streamingReactionsTray/ShowChannelViewDetails',k='streamingReactionsTray/UpdateSurface',l='streamingReactionsTray/ResizeChannelViewWindow',m='streamingReactionsTray/ReactionStateChange',n={AddReactionAnimate:h,HideChannelViewDetails:i,ReactionStateChange:m,ResizeChannelViewWindow:l,ShowChannelViewDetails:j,UpdateSurface:k};f.exports=n;},null);
__d("XVideoChannelViewStoryAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/video\/channel\/view\/story\/async\/{root_video_id}\/",{root_video_id:{type:"String",required:true},video_ids:{type:"StringVector",defaultValue:[]},use_video_placeholder:{type:"Bool",defaultValue:false},setup_interactions:{type:"Bool",defaultValue:false},is_first_story:{type:"Bool",defaultValue:false},feed_tracking_data:{type:"StringVector",defaultValue:[]},caller:{type:"Enum",defaultValue:"channel_view_from_unknown",enumType:1},channel_id:{type:"String"},ad_impression_token:{type:"String"}});},null);
__d('VideoChannelStoryFetcher',['AsyncRequest','HTML','VideoChainingCaller','VideoChannelLogger','VideoChannelLoggerEvents','VideoChannelLoggerFields','VideoChannelRequestStatus','VideoChannelViewVariables','XVideoChannelViewAsyncController','XVideoChannelViewStoryAsyncController'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k,l,m){'use strict';this.$VideoChannelStoryFetcher7=i;this.$VideoChannelStoryFetcher8=j;this.$VideoChannelStoryFetcher4=k;this.$VideoChannelStoryFetcher10=0;this.$VideoChannelStoryFetcher2=null;this.$VideoChannelStoryFetcher3=true;this.$VideoChannelStoryFetcher5=[];this.$VideoChannelStoryFetcher6=[];this.$VideoChannelStoryFetcher9={};if(m){this.$VideoChannelStoryFetcher5=m.videoIDs;this.$VideoChannelStoryFetcher6=m.feedTrackingData;this.$VideoChannelStoryFetcher2=m.cursorInfo.cursor;this.$VideoChannelStoryFetcher3=m.cursorInfo.hasNextPage;var n=this.$VideoChannelStoryFetcher5.indexOf(this.$VideoChannelStoryFetcher7);c('VideoChannelLogger').setOffset(n);this.$VideoChannelStoryFetcher9.start=n;this.$VideoChannelStoryFetcher9.end=n+1;}c('VideoChannelLogger').setPosition(0);this.$VideoChannelStoryFetcher11=l;this.$VideoChannelStoryFetcher12=[];this.$VideoChannelStoryFetcher13=[];}h.prototype.reset=function(i,j){'use strict';this.$VideoChannelStoryFetcher7=i;this.$VideoChannelStoryFetcher8=j;this.$VideoChannelStoryFetcher10=0;this.$VideoChannelStoryFetcher2=null;this.$VideoChannelStoryFetcher3=true;this.$VideoChannelStoryFetcher5=[];this.$VideoChannelStoryFetcher6=[];this.$VideoChannelStoryFetcher9={};this.$VideoChannelStoryFetcher12=[];this.$VideoChannelStoryFetcher13=[];};h.prototype.abandonRequest=function(){'use strict';this.$VideoChannelStoryFetcher1&&this.$VideoChannelStoryFetcher1.abandon();};h.prototype.hasNext=function(){'use strict';var i=this.$VideoChannelStoryFetcher5.length-this.$VideoChannelStoryFetcher9.end>0;return this.$VideoChannelStoryFetcher3||i;};h.prototype.$VideoChannelStoryFetcher14=function(event,i,j){'use strict';var k={};k[c('VideoChannelLoggerFields').EVENT]=event;k[c('VideoChannelLoggerFields').REQUEST_STATUS]=i;k[c('VideoChannelLoggerFields').PERF_TIME_MS]=Date.now()-j;c('VideoChannelLogger').log(k);};h.prototype.fetchFirstStory=function(i,j,k){'use strict';if(j===null)if(this.$VideoChannelStoryFetcher5.length!==0){var l=this.$VideoChannelStoryFetcher5.indexOf(this.$VideoChannelStoryFetcher7);j=this.$VideoChannelStoryFetcher6[l];}var m=c('XVideoChannelViewStoryAsyncController').getURIBuilder().setEnum('caller',this.$VideoChannelStoryFetcher4).setStringVector('video_ids',[this.$VideoChannelStoryFetcher7]).setString('root_video_id',this.$VideoChannelStoryFetcher7).setBool('is_first_story',true).setBool('use_video_placeholder',i).setBool('setup_interactions',k).setString('channel_id',this.$VideoChannelStoryFetcher8).setString('ad_impression_token',this.$VideoChannelStoryFetcher11);if(j)m.setStringVector('feed_tracking_data',[JSON.stringify(j)]);var n=Date.now(),o=new (c('AsyncRequest'))(m.getURI()).setAllowCrossPageTransition(true).setHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_FIRST_STORY,c('VideoChannelRequestStatus').SUCCEEDED,n);this.$VideoChannelStoryFetcher15();}.bind(this)).setErrorHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_FIRST_STORY,c('VideoChannelRequestStatus').FAILED,n);this.$VideoChannelStoryFetcher15();}.bind(this)).setAbortHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_FIRST_STORY,c('VideoChannelRequestStatus').ABORTED,n);this.$VideoChannelStoryFetcher15();}.bind(this));this.$VideoChannelStoryFetcher1=o;this.$VideoChannelStoryFetcher10=Date.now();o.send();};h.prototype.getPreloadedData=function(){'use strict';return {stories:this.$VideoChannelStoryFetcher12,thumbnails:this.$VideoChannelStoryFetcher13};};h.prototype.$VideoChannelStoryFetcher16=function(i,j){'use strict';if(!this.$VideoChannelStoryFetcher8)return;var k=c('XVideoChannelViewAsyncController').getURIBuilder().setString('id',this.$VideoChannelStoryFetcher8).setEnum('caller',this.$VideoChannelStoryFetcher4).setString('original_video_id',this.$VideoChannelStoryFetcher7).setInt('story_count',i);if(this.$VideoChannelStoryFetcher2)k.setString('cursor',this.$VideoChannelStoryFetcher2.toString());var l=Date.now(),m=k.getURI(),n=new (c('AsyncRequest'))(m).setAllowCrossPageTransition(true).setHandler(function(o){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_FROM_ENTQUERY,c('VideoChannelRequestStatus').SUCCEEDED,l);this.$VideoChannelStoryFetcher2=o.getPayload().cursor;this.$VideoChannelStoryFetcher3=o.getPayload().hasNextPage;this.$VideoChannelStoryFetcher15();this.$VideoChannelStoryFetcher17(o,function(p,q){this.$VideoChannelStoryFetcher12=[].concat(this.$VideoChannelStoryFetcher12,p);this.$VideoChannelStoryFetcher13=[].concat(this.$VideoChannelStoryFetcher13,q);return j(p,q);}.bind(this));}.bind(this)).setErrorHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_FROM_ENTQUERY,c('VideoChannelRequestStatus').FAILED,l);this.$VideoChannelStoryFetcher15();}.bind(this)).setAbortHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_FROM_ENTQUERY,c('VideoChannelRequestStatus').ABORTED,l);this.$VideoChannelStoryFetcher15();}.bind(this));this.$VideoChannelStoryFetcher1=n;n.send();};h.prototype.$VideoChannelStoryFetcher18=function(i,j,k){var l=this;'use strict';var m=this.$VideoChannelStoryFetcher9.end,n=this.$VideoChannelStoryFetcher5.length-m,o=m+Math.min(n,i);if(n>0){(function(){var p=l.$VideoChannelStoryFetcher5.slice(m,o),q=l.$VideoChannelStoryFetcher6.slice(m,o).map(function(t){return JSON.stringify(t);}),r=c('XVideoChannelViewStoryAsyncController').getURIBuilder().setEnum('caller',l.$VideoChannelStoryFetcher4).setString('root_video_id',l.$VideoChannelStoryFetcher7).setStringVector('video_ids',p).setStringVector('feed_tracking_data',q),s=Date.now();l.$VideoChannelStoryFetcher1=new (c('AsyncRequest'))(r.getURI()).setAllowCrossPageTransition(true).setErrorHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_FORWARD,c('VideoChannelRequestStatus').FAILED,s);this.$VideoChannelStoryFetcher15();}.bind(l)).setAbortHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_FORWARD,c('VideoChannelRequestStatus').ABORTED,s);this.$VideoChannelStoryFetcher15();}.bind(l)).setHandler(function(t){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_FORWARD,c('VideoChannelRequestStatus').SUCCEEDED,s);this.$VideoChannelStoryFetcher9.end=o;this.$VideoChannelStoryFetcher15();this.$VideoChannelStoryFetcher17(t,function(u,v){this.$VideoChannelStoryFetcher12=[].concat(this.$VideoChannelStoryFetcher12,u);this.$VideoChannelStoryFetcher13=[].concat(this.$VideoChannelStoryFetcher13,v);return j(u,v);}.bind(this));}.bind(l));l.$VideoChannelStoryFetcher1.send();if(k)k(n);})();}else if(this.$VideoChannelStoryFetcher3){this.$VideoChannelStoryFetcher16(i,j);if(k)k(i);}};h.prototype.$VideoChannelStoryFetcher19=function(i,j,k){var l=this;'use strict';var m=this.$VideoChannelStoryFetcher9.start;if(m>0)(function(){var n=Math.max(m-i,0),o=l.$VideoChannelStoryFetcher5.slice(n,m),p=l.$VideoChannelStoryFetcher6.slice(n,m).map(function(s){return JSON.stringify(s);}),q=c('XVideoChannelViewStoryAsyncController').getURIBuilder().setEnum('caller',l.$VideoChannelStoryFetcher4).setString('root_video_id',l.$VideoChannelStoryFetcher7).setStringVector('video_ids',o).setStringVector('feed_tracking_data',p),r=Date.now();l.$VideoChannelStoryFetcher1=new (c('AsyncRequest'))(q.getURI()).setAllowCrossPageTransition(true).setErrorHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_BACKWARD,c('VideoChannelRequestStatus').FAILED,r);this.$VideoChannelStoryFetcher15();}.bind(l)).setAbortHandler(function(){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_BACKWARD,c('VideoChannelRequestStatus').ABORTED,r);this.$VideoChannelStoryFetcher15();}.bind(l)).setHandler(function(s){this.$VideoChannelStoryFetcher14(c('VideoChannelLoggerEvents').FETCH_STORIES_BACKWARD,c('VideoChannelRequestStatus').SUCCEEDED,r);this.$VideoChannelStoryFetcher9.start=n;this.$VideoChannelStoryFetcher15();this.$VideoChannelStoryFetcher17(s,j);}.bind(l));l.$VideoChannelStoryFetcher1.send();if(k)k(m-n);})();};h.prototype.fetchStories=function(i,j,k){'use strict';var l=c('VideoChannelViewVariables').defaultStoriesToLoad;if(this.$VideoChannelStoryFetcher1)return;if(i){this.$VideoChannelStoryFetcher18(l,j,k);}else this.$VideoChannelStoryFetcher19(l,j,k);};h.prototype.$VideoChannelStoryFetcher17=function(i,j){'use strict';var k=i.getPayload(),l=c('HTML').replaceJSONWrapper(k.stories).getNodes(),m=k.thumbnails.map(function(n){return c('HTML').replaceJSONWrapper(n).getRootNode();});j(l,m);};h.prototype.$VideoChannelStoryFetcher15=function(){'use strict';this.$VideoChannelStoryFetcher1=null;};f.exports=h;},null);
__d('VideoHomeCarousel',['collectDataAttributes','AsyncRequest','DOM','VideoHomeLogger','VideoHomeEvents','VideoHomeRequestStatus','VideoHomeLoggerFields','XVideoHomeAsyncController'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={},i={};function j(k,l,m,n,o,p,q){'use strict';this.$VideoHomeCarousel1=k;this.$VideoHomeCarousel2=l;this.$VideoHomeCarousel3=m;this.$VideoHomeCarousel4=n;this.$VideoHomeCarousel5=o;this.$VideoHomeCarousel6=p;this.$VideoHomeCarousel7=q;this.$VideoHomeCarousel8=null;this.$VideoHomeCarousel9=5;if(!this.$VideoHomeCarousel6)this.$VideoHomeCarousel1.endCarousel();this.$VideoHomeCarousel1.subscribe('needsitems',this.$VideoHomeCarousel10.bind(this));}j.register=function(k,l,m,n,o,p,q,r,s){'use strict';var t=l.map(function(u){return c('collectDataAttributes')(u.children[0],['ft']);});h[o]=new j(k,m,n,o,p,q,r);i[o]={videoIDs:s,feedTrackingData:t,cursorInfo:{cursor:r,hasNextPage:q}};};j.getChannelInfoMap=function(){'use strict';return i;};j.load=function(k,l,m,n,o){'use strict';var p=l.map(function(s){return c('collectDataAttributes')(s.children[0],['ft']);}),q=i[k];q.videoIDs=q.videoIDs.concat(o);q.feedTrackingData=q.feedTrackingData.concat(p);q.cursorInfo.cursor=n;q.cursorInfo.hasNextPage=m;var r=h[k];r.$VideoHomeCarousel6=m;r.$VideoHomeCarousel7=n;r.$VideoHomeCarousel8=null;if(l&&l.length){l=l.map(function(s){return c('DOM').create('li',{},s);});r.$VideoHomeCarousel1.addItems(l);}if(!m)r.$VideoHomeCarousel1.endCarousel();};j.prototype.$VideoHomeCarousel10=function(){'use strict';if(!this.$VideoHomeCarousel6||this.$VideoHomeCarousel8!==null)return;var k=this.$VideoHomeCarousel3,l=this.$VideoHomeCarousel4,m=c('XVideoHomeAsyncController').getURIBuilder().setString('session_id',this.$VideoHomeCarousel2).setString('data_source',k).setInt('channel_position',this.$VideoHomeCarousel5).setString('id',l);if(this.$VideoHomeCarousel7)m.setString('cursor',this.$VideoHomeCarousel7);var n=m.getURI(),o=Date.now();function p(r){var s={};s[c('VideoHomeLoggerFields').EVENT]=c('VideoHomeEvents').LOAD_ITEMS;s[c('VideoHomeLoggerFields').REQUEST_STATUS]=r;s[c('VideoHomeLoggerFields').PERF_TIME_MS]=Date.now()-o;s[c('VideoHomeLoggerFields').DATA_SOURCE]=k;s[c('VideoHomeLoggerFields').CHANNEL_ID]=l;c('VideoHomeLogger').log(s);}var q=new (c('AsyncRequest'))().setURI(n).setHandler(function(){p(c('VideoHomeRequestStatus').SUCCEEDED);}).setAbortHandler(function(){p(c('VideoHomeRequestStatus').ABORTED);}).setErrorHandler(function(){p(c('VideoHomeRequestStatus').FAILED);if(q!==this.$VideoHomeCarousel8)return;if(this.$VideoHomeCarousel9>0){this.$VideoHomeCarousel8.abort();this.$VideoHomeCarousel8=null;this.$VideoHomeCarousel10();this.$VideoHomeCarousel9--;}else this.$VideoHomeCarousel1.endCarousel();}.bind(this));this.$VideoHomeCarousel8=q;q.send();};f.exports=j;},null);
__d('VideoStripThumbnailPlaceholder.react',['cx','React','ReactComponentWithPureRenderMixin','XUICarouselItem.react'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'VideoStripThumbnailPlaceholder',mixins:[c('ReactComponentWithPureRenderMixin')],propTypes:{pageLead:i.bool,thumbnailWidth:i.number.isRequired,thumbnailHeight:i.number.isRequired},render:function(){var k=this.props.thumbnailWidth,l=this.props.thumbnailHeight,m={height:l+'px',width:k+'px'},n="_4n83"+(this.props.pageLead?' '+"_3ger":''),o=c('React').createElement('span',{className:n,style:m},c('React').createElement('div',{className:"_4n84"}));return (c('React').createElement(c('XUICarouselItem.react'),{selected:false},o));}});f.exports=j;},null);
__d('VideoStripThumbnailCarousel.react',['csx','cx','fbt','invariant','ix','CSS','DOM','DOMContainer.react','Image.react','React','ReactComponentWithPureRenderMixin','VideoStripThumbnailPlaceholder.react','XUICarousel.react','XUICarouselAnimator','XUICarouselArrow.react','XUICarouselItem.react','shallowCompare'],function a(b,c,d,e,f,g,h,i,j,k,l){var m,n;if(c.__markCompiled)c.__markCompiled();var o=c('React').PropTypes,p=85,q=8,r=16,s=60,t=8,u=16;m=babelHelpers.inherits(v,c('React').Component);n=m&&m.prototype;function v(w,x){'use strict';n.constructor.call(this,w,x);this.$VideoStripThumbnailCarousel1=0;this.$VideoStripThumbnailCarousel2=0;this.$VideoStripThumbnailCarousel3=0;this.$VideoStripThumbnailCarousel4=0;this.state={pageNumber:0};}v.prototype.shouldComponentUpdate=function(w,x){'use strict';return c('shallowCompare')(this,w,x);};v.prototype.componentWillUpdate=function(w,x){'use strict';if(this.props.index!==w.index){var y=Math.floor(w.index/this.$VideoStripThumbnailCarousel3);if(y!==x.pageNumber)this.setState({pageNumber:y});}};v.prototype.$VideoStripThumbnailCarousel5=function(){'use strict';var w=v.calculateThumbDimensions(this.props.dialogWidth,this.props.extraThumbnailHeight);this.$VideoStripThumbnailCarousel1=w.width;this.$VideoStripThumbnailCarousel2=w.height;this.$VideoStripThumbnailCarousel3=w.thumbnailsPerPage;this.$VideoStripThumbnailCarousel4=this.$VideoStripThumbnailCarousel6(this.$VideoStripThumbnailCarousel1);};v.calculateThumbDimensions=function(w,x){'use strict';var y=p+x,z=y*1.7778,aa=w-r,ba=Math.floor(aa/(z+q)),ca=aa-ba*q,da=Math.ceil(ca/(ba+.5)),ea=da*.5625;return {width:da,height:ea,thumbnailsPerPage:ba};};v.getVideoStripHeight=function(w,x){'use strict';var y=v.calculateThumbDimensions(w,x);return y.height+t+u;};v.prototype.$VideoStripThumbnailCarousel6=function(w){'use strict';var x=this.props.dialogWidth;if(!this.props.hasNext){var y=this.props.thumbnails.length+this.props.pendingPreviousThumbnails;x=Math.min(x,y*(w+q));}return x;};v.prototype.$VideoStripThumbnailCarousel7=function(w,x,y,z,aa){'use strict';if(z===this.props.dialogWidth&&aa===0&&this.props.pendingPreviousThumbnails===0){c('CSS').addClass(w,"_3ger");}else c('CSS').removeClass(w,"_3ger");var ba=c('DOM').find(w,"._38a3");c('DOM').setAttributes(w,{style:{width:x+'px'}});c('DOM').setAttributes(ba,{style:{width:x+'px',height:y+'px'}});return (c('React').createElement(c('XUICarouselItem.react'),{key:aa},c('React').createElement(c('DOMContainer.react'),null,w)));};v.prototype.$VideoStripThumbnailCarousel8=function(w){'use strict';!(this.state.pageNumber!==0)?k(0):void 0;this.setState({pageNumber:this.state.pageNumber-1});w.stopPropagation();};v.prototype.$VideoStripThumbnailCarousel9=function(w,x){'use strict';var y=this.state.pageNumber+1;if(x)y=0;this.setState({pageNumber:y});w.stopPropagation();};v.prototype.$VideoStripThumbnailCarousel10=function(w){'use strict';var x=-(s/2),y={marginTop:x+'px'};return [c('React').createElement('div',{className:"_1ed1",style:y},c('React').createElement(c('XUICarouselArrow.react'),{disabled:this.state.pageNumber===0,onClick:function(z){return this.$VideoStripThumbnailCarousel8(z);}.bind(this)},c('React').createElement(c('Image.react'),{alt:j._("Prev"),src:l('/images/vault/arrow_left.png')}))),c('React').createElement('div',{className:"_1ed1",style:y},c('React').createElement(c('XUICarouselArrow.react'),{disabled:false,onClick:function(z){return this.$VideoStripThumbnailCarousel9(z,w);}.bind(this)},c('React').createElement(c('Image.react'),{alt:j._("Next"),src:l('/images/vault/arrow_right.png')})))];};v.prototype.render=function(){'use strict';this.$VideoStripThumbnailCarousel5();var w=new (c('XUICarouselAnimator'))({type:'horizontal'}),x=null,y=this.$VideoStripThumbnailCarousel3*this.state.pageNumber,z=y+this.$VideoStripThumbnailCarousel3,aa=Math.min(z,this.props.thumbnails.length-1);if(this.$VideoStripThumbnailCarousel4===this.props.dialogWidth){var ba=z>this.props.thumbnails.length;x=this.$VideoStripThumbnailCarousel10(ba);}var ca=this.props.thumbnails,da=[];for(var ea=0;ea<this.props.pendingPreviousThumbnails;ea++)da.push(c('React').createElement(c('VideoStripThumbnailPlaceholder.react'),{pageLead:ea===0,thumbnailWidth:this.$VideoStripThumbnailCarousel1,thumbnailHeight:this.$VideoStripThumbnailCarousel2,key:ea-this.props.pendingPreviousThumbnails}));for(ea=y;ea<=z;ea++)if(ea<=aa){da.push(this.$VideoStripThumbnailCarousel7(ca[ea],this.$VideoStripThumbnailCarousel1,this.$VideoStripThumbnailCarousel2,this.$VideoStripThumbnailCarousel4,ea-y));}else if(this.props.hasNext)da.push(c('React').createElement(c('VideoStripThumbnailPlaceholder.react'),{thumbnailWidth:this.$VideoStripThumbnailCarousel1,thumbnailHeight:this.$VideoStripThumbnailCarousel2,key:ea-y}));if(aa<z&&this.props.hasNext)this.props.loadNextItems();return (c('React').createElement(c('XUICarousel.react'),{animator:w,arrows:x,initialAutoplay:false,initialIndex:0,onItemClick:function(){return null;},resizeViewport:'disabled',viewportHeight:this.$VideoStripThumbnailCarousel2+t,viewportWidth:this.$VideoStripThumbnailCarousel4,wrapAround:this.state.pageNumber!==0},da));};v.propTypes={dialogWidth:o.number.isRequired,extraThumbnailHeight:o.number.isRequired,hasNext:o.bool.isRequired,index:o.number.isRequired,loadNextItems:o.func.isRequired,pendingPreviousThumbnails:o.number.isRequired,thumbnails:o.arrayOf(o.object).isRequired};f.exports=v;},null);
__d('VideoWatchAndScrollNextPreview.react',['cx','fbt','CenteredContainer.react','DOMContainer.react','Layout.react','React','ReactCSSTransitionGroup'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('Layout.react').Column,l=c('Layout.react').FillColumn,m=c('React').createClass({displayName:'VideoWatchAndScrollNextPreview',propTypes:{fadeOut:j.bool,owner:j.string,thumbnail:j.instanceOf(HTMLElement).isRequired,viewCount:j.string},render:function(){var n=c('React').createElement('div',{className:"_4_e3 _2se8"});return (c('React').createElement(c('ReactCSSTransitionGroup'),{transitionAppear:true,transitionAppearTimeout:0,transitionEnter:false,transitionLeave:false,transitionName:{appear:"_4zs7",appearActive:"_4zs8"}},c('React').createElement(c('CenteredContainer.react'),{className:"_1xun"+(this.props.fadeOut?' '+"_2eej":'')},c('React').createElement(c('Layout.react'),null,c('React').createElement(k,null,c('React').createElement('div',{className:"_1xuo"},c('React').createElement(c('DOMContainer.react'),null,this.props.thumbnail),c('React').createElement('div',{className:"_1xup"},c('React').createElement('div',{className:"_1xuq"})),n)),c('React').createElement(l,null,c('React').createElement('div',{className:"_1xur"},c('React').createElement('div',null,i._("Next Up:")),c('React').createElement('div',{className:"_4_e2"},this.props.owner),c('React').createElement('div',null,this.props.viewCount),n))))));}});f.exports=m;},null);
__d('VideoWatchAndScrollEndScreen.react',['cx','fbt','ix','AbstractButton.react','Image.react','React','ReactCSSTransitionGroup','VideoWatchAndScrollNextPreview.react'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('React').createClass({displayName:'VideoWatchAndScrollEndScreen',propTypes:{fadeOut:k.bool,nextVideoMetadata:k.object.isRequired,onReplay:k.func.isRequired},render:function(){var m=c('React').createElement(c('Image.react'),{className:"_5i0o",src:j('/images/video/player/embedded_controls/icons/replay.png')}),n=i._("Replay"),o=this.props.nextVideoMetadata;return (c('React').createElement('div',{className:"_5qdn"+(' '+"_2se8")+(this.props.fadeOut?' '+"_2gud":'')},!!o.thumbnail&&c('React').createElement(c('VideoWatchAndScrollNextPreview.react'),{fadeOut:this.props.fadeOut,owner:o.owner,thumbnail:o.thumbnail,viewCount:o.viewCount}),c('React').createElement(c('ReactCSSTransitionGroup'),{transitionAppear:true,transitionAppearTimeout:0,transitionEnter:false,transitionLeave:false,transitionName:{appear:"_12mz",appearActive:"_12m-"}},c('React').createElement('span',{className:"_5qdx _2se8"},c('React').createElement(c('AbstractButton.react'),{'aria-label':n,className:"_5qdy",image:m,onClick:this.props.onReplay,tabIndex:'0',type:'button'})))));}});f.exports=l;},null);
__d('VideoWatchAndScrollContainer.react',['csx','cx','CSS','DOM','DOMContainer.react','DOMDimensions','Event','Parent','React','ReactCSSTransitionGroup','Rect','SubscriptionsHandler','VideoWatchAndScrollEndScreen.react','cancelAnimationFrame','getViewportDimensions','requestAnimationFrame','shallowCompare','throttle'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=300,n=470,o=3000,p=500,q=100,r={NW:'nw',NE:'ne',SE:'se',SW:'sw'};j=babelHelpers.inherits(s,c('React').Component);k=j&&j.prototype;function s(t,u){k.constructor.call(this,t,u);this.state=this.$VideoWatchAndScrollContainer3(this.props);}s.prototype.$VideoWatchAndScrollContainer3=function(t){var u=this.$VideoWatchAndScrollContainer4(),v=this.$VideoWatchAndScrollContainer5(this.props.initialPosition,u);return {channelVideoElements:[this.props.initialVideoElement],containerBoundingBox:u,dragging:false,draggingStartHeight:0,draggingStartLeft:0,draggingStartMousePositionX:0,draggingStartMousePositionY:0,draggingStartTop:0,draggingStartWidth:0,endScreenFadeOut:false,endScreenShown:false,fadeOut:false,height:v.height,left:v.left,nextVideoMetadata:null,overlayShown:false,resizeDirection:null,top:v.top,width:v.width,videoIndex:0};};s.prototype.shouldComponentUpdate=function(t,u){return !this.state.fadeOut&&c('shallowCompare')(this,t,u);};s.prototype.componentDidUpdate=function(t,u){if(!u)return;if(!u.dragging&&this.state.dragging){this.documentSubscriptions=new (c('SubscriptionsHandler'))();this.documentSubscriptions.addSubscriptions(c('Event').listen(document,'mousemove',this.$VideoWatchAndScrollContainer6.bind(this)),c('Event').listen(document,'mouseup',this.$VideoWatchAndScrollContainer7.bind(this)));}else if(u.dragging&&!this.state.dragging)this.documentSubscriptions.release();if(u.endScreenShown!==this.state.endScreenShown)if(this.state.endScreenShown){this.$VideoWatchAndScrollContainer1=setTimeout(function(){this.props.onChannelNavigation(1);this.$VideoWatchAndScrollContainer2=setTimeout(function(){this.setState({endScreenFadeOut:true});}.bind(this),p);this.$VideoWatchAndScrollContainer1=setTimeout(function(){this.setState({endScreenShown:false,endScreenFadeOut:false});}.bind(this),p+q);}.bind(this),o);}else{clearTimeout(this.$VideoWatchAndScrollContainer1);this.$VideoWatchAndScrollContainer1=null;this.setState({endScreenFadeOut:false});}var v=["._23if","._23ig"],w=u.channelVideoElements||[];this.state.channelVideoElements.forEach(function(x){if(w.indexOf(x)!==-1)return;v.forEach(function(y){var z=c('DOM').scry(x,y),aa=z[0];if(aa)c('CSS').hide(aa);});});};s.prototype.componentDidMount=function(){this.resizeListener=c('Event').listen(window,'resize',c('throttle')(function(){var t=this.$VideoWatchAndScrollContainer4(),u=this.$VideoWatchAndScrollContainer5({height:this.state.height,left:this.state.left,top:this.state.top,width:this.state.width},t);this.setState({containerBoundingBox:t,height:u.height,left:u.left,top:u.top,width:u.width});}.bind(this),100));};s.prototype.componentWillUnmount=function(){this.props.onInitialPositionUpdate({height:this.state.height,left:this.state.left,top:this.state.top,width:this.state.width});if(this.documentSubscriptions)this.documentSubscriptions.release();if(this.resizeListener)this.resizeListener.remove();this.$VideoWatchAndScrollContainer1&&clearTimeout(this.$VideoWatchAndScrollContainer1);this.$VideoWatchAndScrollContainer2&&clearTimeout(this.$VideoWatchAndScrollContainer2);};s.prototype.$VideoWatchAndScrollContainer8=function(t,event){this.$VideoWatchAndScrollContainer9(event,t);};s.prototype.$VideoWatchAndScrollContainer10=function(event){if(!c('Parent').bySelector(event.target,"._3t-6"))return;this.$VideoWatchAndScrollContainer9(event,null);};s.prototype.$VideoWatchAndScrollContainer11=function(event){return event.button!==0||c('Parent').bySelector(event.target,"._3t-6")||c('Parent').bySelector(event.target,"._2se8");};s.prototype.$VideoWatchAndScrollContainer12=function(event){if(this.$VideoWatchAndScrollContainer11(event))return;this.props.onClick&&this.props.onClick();};s.prototype.$VideoWatchAndScrollContainer13=function(event){if(this.$VideoWatchAndScrollContainer11(event))return;this.props.onDoubleClick&&this.props.onDoubleClick();};s.prototype.$VideoWatchAndScrollContainer9=function(event,t){if(event.button!==0)return;if(c('Parent').bySelector(event.target,"._360f"))return;this.props.onGrab();this.setState({containerBoundingBox:this.$VideoWatchAndScrollContainer4(),dragging:true,draggingStartHeight:this.state.height,draggingStartLeft:this.state.left,draggingStartMousePositionX:event.screenX,draggingStartMousePositionY:event.screenY,draggingStartTop:this.state.top,draggingStartWidth:this.state.width,resizeDirection:t});event.preventDefault();};s.prototype.$VideoWatchAndScrollContainer4=function(){var t=0,u=c('DOM').scry(document.body,".fbChatSidebar");if(u.length===1)t=c('DOMDimensions').getElementDimensions(u[0]).width;var v=c('getViewportDimensions').withoutScrollbars(),w=new (c('Rect'))(43,v.width-t,v.height,0);return w;};s.prototype.$VideoWatchAndScrollContainer5=function(t,u){var v=new (c('Rect'))(t.top,t.left+t.width,t.top+t.height,t.left);v=v.boundWithin(u);return {height:v.h(),left:v.getLeft(),top:v.getTop(),width:v.w()};};s.prototype.$VideoWatchAndScrollContainer14=function(t,u,v){var w=t.top,x=u.getTop(),y=x-w;if(y>0){if(v===r.NE||v===r.NW)t.height-=y;t.top=x;}var z=t.left,aa=u.getLeft(),ba=aa-z;if(ba>0){if(v===r.NW||v===r.SW)t.width-=ba;t.left=aa;}var ca=t.top+t.height,da=u.getTop()+u.h(),ea=ca-da;if(ea>0)t.height=da-t.top;var fa=t.left+t.width,ga=u.getLeft()+u.w(),ha=fa-ga;if(ha>0)t.width=ga-t.left;};s.prototype.$VideoWatchAndScrollContainer15=function(t,u,v){if(t.width<m){if(v===r.NW||v===r.SW)t.left-=m-t.width;t.width=m;}if(t.height<m){if(v===r.NE||v===r.NW)t.top-=m-t.height;t.height=m;}};s.prototype.$VideoWatchAndScrollContainer16=function(t,u,v){if(t.width>n){if(v===r.NW||v===r.SW)t.left+=t.width-n;t.width=n;}if(t.height>n){if(v===r.NE||v===r.NW)t.top+=t.height-n;t.height=n;}};s.prototype.$VideoWatchAndScrollContainer17=function(t,u,v){var w=t.width/t.height,x=u.width/u.height;if(w>x){var y=t.height*x;if(v===r.NW||v===r.SW)t.left+=t.width-y;t.width=y;}else if(w<x){var z=t.width/x;if(v===r.NE||v===r.NW)t.top+=t.height-z;t.height=z;}};s.prototype.$VideoWatchAndScrollContainer18=function(t,u,v,w){this.$VideoWatchAndScrollContainer14(t,v,w);this.$VideoWatchAndScrollContainer15(t,u,w);this.$VideoWatchAndScrollContainer16(t,u,w);this.$VideoWatchAndScrollContainer17(t,u,w);return {height:t.height,left:t.left,top:t.top,width:t.width};};s.prototype.$VideoWatchAndScrollContainer6=function(event){c('cancelAnimationFrame')(this.dragUpdateRequestAnimationFrameID);this.dragUpdateRequestAnimationFrameID=c('requestAnimationFrame')(this.$VideoWatchAndScrollContainer19.bind(this,event));};s.prototype.$VideoWatchAndScrollContainer19=function(event){if(!this.state.dragging)return;var t=event.screenX-this.state.draggingStartMousePositionX,u=event.screenY-this.state.draggingStartMousePositionY,v=this.state.resizeDirection,w;if(!v){w=this.$VideoWatchAndScrollContainer5({height:this.state.draggingStartHeight,left:this.state.draggingStartLeft+t,top:this.state.draggingStartTop+u,width:this.state.draggingStartWidth},this.state.containerBoundingBox);this.setState({height:w.height,left:w.left,top:w.top,width:w.width});}else{var x=this.state.draggingStartHeight,y=this.state.draggingStartLeft,z=this.state.draggingStartTop,aa=this.state.draggingStartWidth;if(v===r.NE||v===r.SE)aa+=t;if(v===r.NW||v===r.SW){y+=t;aa-=t;}if(v===r.SE||v===r.SW)x+=u;if(v===r.NE||v===r.NW){z+=u;x-=u;}w=this.$VideoWatchAndScrollContainer18({height:x,left:y,top:z,width:aa},{height:this.state.draggingStartHeight,left:this.state.draggingStartLeft,top:this.state.draggingStartTop,width:this.state.draggingStartWidth},this.state.containerBoundingBox,v);this.setState({height:w.height,left:w.left,top:w.top,width:w.width});}event.preventDefault();};s.prototype.$VideoWatchAndScrollContainer7=function(event){c('cancelAnimationFrame')(this.dragUpdateRequestAnimationFrameID);this.props.onDrop();this.setState({dragging:false,draggingStartHeight:0,draggingStartLeft:0,draggingStartMousePositionX:0,draggingStartMousePositionY:0,draggingStartTop:0,draggingStartWidth:0,resizeDirection:null});event.preventDefault();};s.prototype.$VideoWatchAndScrollContainer20=function(t,u){if(t>this.state.channelVideoElements.length)return null;var v=this.state.channelVideoElements[t];if(!v)return null;return (c('React').createElement('div',{className:"_2yq3"+(u==='left'?' '+"_2yq4":'')+(u==='center'?' '+"_2yq5":'')+(u==='right'?' '+"_2yq6":''),key:v.id},c('React').createElement(c('DOMContainer.react'),null,v)));};s.prototype.render=function(){var t={height:Math.round(this.state.height)+'px',left:this.state.left+'px',top:this.state.top+'px',width:Math.round(this.state.width)+'px'};this.props.onInitialPositionUpdate({height:this.state.height,left:this.state.left,top:this.state.top,width:this.state.width});var u=this.state.channelVideoElements,v=u[this.state.videoIndex];if(v)c('CSS').addClass(v,"_1kfp");var w=false,x=null;if(w)x=c('React').createElement('div',{className:(this.state.overlayShown?"_518-":'')+(' '+"_518_")},this.state.videoIndex>0&&c('React').createElement('a',{alt:'Button to go to the previous video item',className:"_5190 _360f",onClick:function(){return this.props.onChannelNavigation(-1);}.bind(this)}),this.state.videoIndex<u.length-1&&c('React').createElement('a',{alt:'Button to go to the next video item',className:"_5199 _360f",onClick:function(){return this.props.onChannelNavigation(1);}.bind(this)}));var y=null;if(this.state.endScreenShown)y=c('React').createElement(c('VideoWatchAndScrollEndScreen.react'),{fadeOut:this.state.endScreenFadeOut,nextVideoMetadata:this.state.nextVideoMetadata||{},onReplay:function(){return this.props.onReplay();}.bind(this)});return (c('React').createElement(c('ReactCSSTransitionGroup'),{transitionAppear:true,transitionAppearTimeout:500,transitionEnter:false,transitionLeave:false,transitionName:'fbWatchAndScroll-FadeIn'},c('React').createElement('div',{className:"_360g"+(this.state.fadeOut?' '+"_473b":''),style:t},y,c('React').createElement('div',{className:"_52u8",onMouseDown:this.$VideoWatchAndScrollContainer10.bind(this),onClick:this.$VideoWatchAndScrollContainer12.bind(this),onDoubleClick:this.$VideoWatchAndScrollContainer13.bind(this)},this.$VideoWatchAndScrollContainer20(this.state.videoIndex-1,'left'),this.$VideoWatchAndScrollContainer20(this.state.videoIndex,'center'),this.$VideoWatchAndScrollContainer20(this.state.videoIndex+1,'right')),c('React').createElement('div',{className:"_52ua",onMouseDown:this.$VideoWatchAndScrollContainer8.bind(this,r.NW)}),c('React').createElement('div',{className:"_52uc",onMouseDown:this.$VideoWatchAndScrollContainer8.bind(this,r.NE)}),c('React').createElement('div',{className:"_52ui",onMouseDown:this.$VideoWatchAndScrollContainer8.bind(this,r.SE)}),c('React').createElement('div',{className:"_52uj",onMouseDown:this.$VideoWatchAndScrollContainer8.bind(this,r.SW)}),x,c('React').createElement('ul',{className:"_2yq7"},u.map(function(z,aa){if(aa>this.state.videoIndex+1||aa<this.state.videoIndex-1)c('CSS').removeClass(z,"_1kfp");if(aa<=this.state.videoIndex+1)return null;return (c('React').createElement('li',{key:z.id},c('React').createElement(c('DOMContainer.react'),null,z)));}.bind(this))))));};s.propTypes={initialPosition:l.object.isRequired,initialVideoElement:l.instanceOf(HTMLElement).isRequired,onChannelNavigation:l.func.isRequired,onClick:l.func.isRequired,onDoubleClick:l.func.isRequired,onDrop:l.func.isRequired,onGrab:l.func.isRequired,onInitialPositionUpdate:l.func.isRequired,onReplay:l.func.isRequired};f.exports=s;},null);
__d('VideoWatchAndScrollController',['csx','cx','invariant','Bootloader','CSS','DOM','DOMDimensions','EventListener','React','ReactDOM','SubscriptionsHandler','VideoAutoplayControllerX','VideoChainingCaller','VideoChannelStoryFetcher','VideoFrameBuffer','VideoPlayerExperiments','VideoPlayerLoggerEvent','VideoPlayerReason','VideoWatchAndScrollContainer.react','cancelAnimationFrame','destroyOnUnload','requestAnimationFrame','throttle'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=169,l=300,m=10,n=42,o=n+m,p=470,q=300,r=2,s=[c('VideoPlayerReason').AUTOPLAY,c('VideoPlayerReason').PAGE_VISIBILITY],t=300,u=3000,v=600,w=null;function x(y,z,aa,ba){'use strict';this.$VideoWatchAndScrollController35=new (c('SubscriptionsHandler'))();this.$VideoWatchAndScrollController36=new (c('SubscriptionsHandler'))();this.$VideoWatchAndScrollController1=false;this.$VideoWatchAndScrollController2=null;this.$VideoWatchAndScrollController3=null;this.$VideoWatchAndScrollController4=null;this.$VideoWatchAndScrollController5=false;this.$VideoWatchAndScrollController39=aa;this.$VideoWatchAndScrollController40=ba;this.$VideoWatchAndScrollController43=false;this.$VideoWatchAndScrollController34=false;this.$VideoWatchAndScrollController38=null;if(this.$VideoWatchAndScrollController40)this.$VideoWatchAndScrollController38=new (c('VideoChannelStoryFetcher'))(z,y,this.$VideoWatchAndScrollController39,null);this.$VideoWatchAndScrollController41=[];this.$VideoWatchAndScrollController42=0;this.$VideoWatchAndScrollController44=[];this.$VideoWatchAndScrollController45=[];this.$VideoWatchAndScrollController6=k;this.$VideoWatchAndScrollController7=l;this.$VideoWatchAndScrollController10=window.document.getElementById('leftCol');this.$VideoWatchAndScrollController11=window.document.getElementById('pagelet_bluebar');this.$VideoWatchAndScrollController49={};this.$VideoWatchAndScrollController52();c('destroyOnUnload')(function(){this.$VideoWatchAndScrollController53();if(this.$VideoWatchAndScrollController5)this.$VideoWatchAndScrollController54();if(this.$VideoWatchAndScrollController35)this.$VideoWatchAndScrollController35.release();if(this===w)w=null;}.bind(this));}x.prototype.$VideoWatchAndScrollController55=function(y,z,aa){'use strict';!y?j(0):void 0;!z.length?j(0):void 0;this.$VideoWatchAndScrollController43=false;this.$VideoWatchAndScrollController36=new (c('SubscriptionsHandler'))();this.$VideoWatchAndScrollController42=aa;this.$VideoWatchAndScrollController38=y;this.$VideoWatchAndScrollController44=y.getPreloadedData().thumbnails||[];this.$VideoWatchAndScrollController45=[];this.$VideoWatchAndScrollController41=z.slice(0);this.$VideoWatchAndScrollController41.forEach(function(ca){this.$VideoWatchAndScrollController56(ca);ca.setIsInChannel(false);}.bind(this));var ba=this.$VideoWatchAndScrollController41.shift();this.$VideoWatchAndScrollController57(ba,c('VideoPlayerReason').USER);};x.registerVideoController=function(y,z,aa,ba){'use strict';if(w==null)w=new x(y.getVideoChannelID(),y.getVideoID(),z,ba);w.$VideoWatchAndScrollController35.addSubscriptions(y.addListener('enterWatchAndScroll',function(){if(w)w.$VideoWatchAndScrollController58(y);}),y.addListener('exitWatchAndScroll',function(){if(w)w.$VideoWatchAndScrollController59();}),y.addListener('WatchAndScroll/close',function(){if(w)w.$VideoWatchAndScrollController54();}),y.addListener('WatchAndScroll/overlayShown',function(){return w&&w.$VideoWatchAndScrollController60();}),y.addListener('WatchAndScroll/overlayHidden',function(){return w&&w.$VideoWatchAndScrollController61();}));var ca=['beginPlayback','changeVolume','muteVideo','toggleFullscreen','unmuteVideo','VideoChannelController/enterChannel'];ca.forEach(function(event){if(w)w.$VideoWatchAndScrollController35.addSubscriptions(y.addListener(event,function(da){if(w)w.$VideoWatchAndScrollController62(y,aa,event,da);}));});if(!ba)w.$VideoWatchAndScrollController35.addSubscriptions(w.$VideoWatchAndScrollController63(y));};x.isActive=function(){'use strict';if(!w)return false;return w.$VideoWatchAndScrollController5&&!w.$VideoWatchAndScrollController43;};x.updateSlidingCalculations=function(){'use strict';if(!w)return;if(w.$VideoWatchAndScrollController23)w.$VideoWatchAndScrollController64(w.$VideoWatchAndScrollController23);};x.registerChannelVideoController=function(y){'use strict';if(!w)return;y.setIsInChannel(false);w.$VideoWatchAndScrollController56(y);w.$VideoWatchAndScrollController41.push(y);};x.getStoryFetcherData=function(){'use strict';return w&&w.$VideoWatchAndScrollController65();};x.prototype.$VideoWatchAndScrollController65=function(){'use strict';return {storyFetcher:this.$VideoWatchAndScrollController38,videoPlayerControllers:this.$VideoWatchAndScrollController41,channelVideoIndex:this.$VideoWatchAndScrollController42,rootVideoPlayerController:this.$VideoWatchAndScrollController16,channelInteractionsToRegister:this.$VideoWatchAndScrollController45};};x.getVideoPlaceholder=function(){'use strict';if(!w)return null;return w.$VideoWatchAndScrollController18;};x.getReactContainer=function(){'use strict';if(!w)return null;return w.$VideoWatchAndScrollController13;};x.registerChannelInteraction=function(y){'use strict';if(w)w.$VideoWatchAndScrollController45.push(y);};x.onEnterChannel=function(){'use strict';if(!w)return;w.$VideoWatchAndScrollController66();};x.prototype.$VideoWatchAndScrollController66=function(){'use strict';this.$VideoWatchAndScrollController43=true;this.$VideoWatchAndScrollController38&&this.$VideoWatchAndScrollController38.abandonRequest();if(!this.$VideoWatchAndScrollController13)return;var y=["._23if","._23ig"];this.$VideoWatchAndScrollController13.state.channelVideoElements.forEach(function(z){y.forEach(function(aa){var ba=c('DOM').scry(z,aa),ca=ba[0];if(ca)c('CSS').show(ca);});});};x.resetFromChannelView=function(y,z,aa){'use strict';if(!w)return;w.$VideoWatchAndScrollController55(y,z,aa);};x.prototype.$VideoWatchAndScrollController62=function(y,z,event,aa){'use strict';if(this.$VideoWatchAndScrollController5){if(this.$VideoWatchAndScrollController15===y)return;if(aa&&s.includes(aa.reason))return;this.$VideoWatchAndScrollController15.pause(c('VideoPlayerReason').USER);}if(z&&(!this.$VideoWatchAndScrollController5||c('VideoPlayerExperiments').autoplayWhenWNS))if(event==='toggleFullscreen'&&y.isFullscreen()||event==='VideoChannelController/enterChannel'){if(this.$VideoWatchAndScrollController23)this.$VideoWatchAndScrollController53();}else if((event!=='beginPlayback'||aa&&aa.reason===c('VideoPlayerReason').USER)&&y.isState('playing')&&!y.isMuted()&&!y.isFullscreen()&&!y.getIsInChannel())this.$VideoWatchAndScrollController64(y);};x.prototype.$VideoWatchAndScrollController67=function(y){'use strict';if(this.$VideoWatchAndScrollController43||y!==this.$VideoWatchAndScrollController15)return;this.$VideoWatchAndScrollController13.setState({endScreenShown:true,nextVideoMetadata:this.$VideoWatchAndScrollController68()});if(this.$VideoWatchAndScrollController41.length>this.$VideoWatchAndScrollController42)return;var z=false,aa=y.addListener('beginPlayback',function(){z=true;});setTimeout(function(){aa.remove();if(z)return;w&&w.$VideoWatchAndScrollController13.setState({fadeOut:true});setTimeout(function(){w&&w.$VideoWatchAndScrollController54();},t);},u);};x.prototype.$VideoWatchAndScrollController63=function(y){'use strict';return y.addListener('finishPlayback',function(){return this.$VideoWatchAndScrollController67(y);}.bind(this));};x.prototype.$VideoWatchAndScrollController64=function(y){'use strict';var z=y.getVideoNode();if(!z.offsetParent)return;this.$VideoWatchAndScrollController23=y;this.$VideoWatchAndScrollController30=c('throttle')(this.$VideoWatchAndScrollController69.bind(this),100);window.addEventListener('resize',this.$VideoWatchAndScrollController30);this.$VideoWatchAndScrollController70(z);this.$VideoWatchAndScrollController71();};x.prototype.$VideoWatchAndScrollController69=function(){'use strict';if(this.$VideoWatchAndScrollController23){this.$VideoWatchAndScrollController70(this.$VideoWatchAndScrollController18||this.$VideoWatchAndScrollController23.getVideoNode());this.$VideoWatchAndScrollController31();}};x.prototype.$VideoWatchAndScrollController72=function(y){'use strict';var z=this.$VideoWatchAndScrollController73(y),aa=y.scrollWidth,ba=y.scrollHeight,ca=q,da=p;if(aa<ba){ca*=aa/ba;da*=aa/ba;}var ea=ca;if(this.$VideoWatchAndScrollController10&&this.$VideoWatchAndScrollController10.children.length){var fa=this.$VideoWatchAndScrollController73(this.$VideoWatchAndScrollController10);if(fa.left<=z.left)ea=Math.min(fa.left-2*m,da);}else{var ga=document.getElementById('timeline_tab_content');if(ga){var ha=this.$VideoWatchAndScrollController73(ga).left;ea=Math.min(ha-2*m,da);}}return Math.max(ea,ca);};x.prototype.$VideoWatchAndScrollController73=function(y){'use strict';var z={left:0,top:0};do{z.top+=y.offsetTop;z.left+=y.offsetLeft;}while(y=y.offsetParent);return z;};x.prototype.$VideoWatchAndScrollController70=function(y){'use strict';this.$VideoWatchAndScrollController26=this.$VideoWatchAndScrollController73(y);this.$VideoWatchAndScrollController32=y.scrollWidth;this.$VideoWatchAndScrollController33=y.scrollHeight;var z=Math.max(this.$VideoWatchAndScrollController32,this.$VideoWatchAndScrollController33);if(z<q){var aa=q/z;this.$VideoWatchAndScrollController32*=aa;this.$VideoWatchAndScrollController33*=aa;}var ba=this.$VideoWatchAndScrollController72(y);if(this.$VideoWatchAndScrollController10&&this.$VideoWatchAndScrollController10.childNodes.length){var ca=this.$VideoWatchAndScrollController73(this.$VideoWatchAndScrollController10),da=window.getComputedStyle(this.$VideoWatchAndScrollController10),ea=parseInt(da.paddingTop,10);this.$VideoWatchAndScrollController25=ca.top+ea;}else{this.$VideoWatchAndScrollController25=m;if(this.$VideoWatchAndScrollController11)this.$VideoWatchAndScrollController25+=this.$VideoWatchAndScrollController11.scrollHeight;}this.$VideoWatchAndScrollController25=Math.max(this.$VideoWatchAndScrollController25,o);this.$VideoWatchAndScrollController22=ba/this.$VideoWatchAndScrollController32;this.$VideoWatchAndScrollController21=Math.abs(this.$VideoWatchAndScrollController26.left-m)/r;this.$VideoWatchAndScrollController24=this.$VideoWatchAndScrollController26.top-this.$VideoWatchAndScrollController25;};x.prototype.$VideoWatchAndScrollController71=function(){'use strict';if(this.$VideoWatchAndScrollController19||this.$VideoWatchAndScrollController23.isState('playing')&&!this.$VideoWatchAndScrollController23.isMuted()){this.$VideoWatchAndScrollController74(this.$VideoWatchAndScrollController75.bind(this));this.$VideoWatchAndScrollController75();}else this.$VideoWatchAndScrollController53();};x.prototype.$VideoWatchAndScrollController75=function(){'use strict';var y=this.$VideoWatchAndScrollController23&&this.$VideoWatchAndScrollController23.isState('playing')&&!this.$VideoWatchAndScrollController23.isMuted();if(this.$VideoWatchAndScrollController20||!this.$VideoWatchAndScrollController23||!y){if(this.$VideoWatchAndScrollController23&&!y)this.$VideoWatchAndScrollController53();return;}var z=this.$VideoWatchAndScrollController24+this.$VideoWatchAndScrollController33/4;if(window.scrollY>z){this.$VideoWatchAndScrollController34=true;return;}if(window.scrollY>this.$VideoWatchAndScrollController24){if(this.$VideoWatchAndScrollController34)return;this.$VideoWatchAndScrollController23.emit('preventWNSOverlay');var aa=this.$VideoWatchAndScrollController26.left-window.scrollX,ba=this.$VideoWatchAndScrollController26.top-window.scrollY;this.$VideoWatchAndScrollController8={left:Math.max(aa,m),top:Math.max(ba,o),width:this.$VideoWatchAndScrollController32,height:this.$VideoWatchAndScrollController33};c('CSS').addClass(this.$VideoWatchAndScrollController76(),"_5h98");this.$VideoWatchAndScrollController20=this.$VideoWatchAndScrollController23.addListener('stateChange',this.$VideoWatchAndScrollController77.bind(this));this.$VideoWatchAndScrollController57(this.$VideoWatchAndScrollController23,c('VideoPlayerReason').AUTOPLAY,true);this.$VideoWatchAndScrollController74(this.$VideoWatchAndScrollController78.bind(this));this.$VideoWatchAndScrollController78();}else this.$VideoWatchAndScrollController34=false;};x.prototype.$VideoWatchAndScrollController78=function(){'use strict';if(window.scrollY<=this.$VideoWatchAndScrollController24){c('CSS').removeClass(this.$VideoWatchAndScrollController76(),"_5h98");var y=this.$VideoWatchAndScrollController23.isMuted(),z=this.$VideoWatchAndScrollController23.isState('playing')||this.$VideoWatchAndScrollController20||this.$VideoWatchAndScrollController19;if(z){this.$VideoWatchAndScrollController19=this.$VideoWatchAndScrollController23.addListener('stateChange',this.$VideoWatchAndScrollController79.bind(this));c('CSS').addClass(this.$VideoWatchAndScrollController23.getRootNode(),"_5h9g");var aa=this.$VideoWatchAndScrollController23.getOption('VideoControls','areControlsVisible');if(!aa&&!this.$VideoWatchAndScrollController29)this.$VideoWatchAndScrollController29=this.$VideoWatchAndScrollController23.getOption('VideoControls','acquireForceHideLock');}var ba=this.$VideoWatchAndScrollController23;this.$VideoWatchAndScrollController54();if(z){this.$VideoWatchAndScrollController23=ba;this.$VideoWatchAndScrollController23.play(c('VideoPlayerReason').AUTOPLAY);if(!y)this.$VideoWatchAndScrollController23.unmute();}this.$VideoWatchAndScrollController71();}else if(!this.$VideoWatchAndScrollController37)this.$VideoWatchAndScrollController37=c('requestAnimationFrame')(this.$VideoWatchAndScrollController80.bind(this));};x.prototype.$VideoWatchAndScrollController79=function(){'use strict';if(this.$VideoWatchAndScrollController19&&this.$VideoWatchAndScrollController23.isState('playing'))this.$VideoWatchAndScrollController81();};x.prototype.$VideoWatchAndScrollController77=function(){'use strict';if(this.$VideoWatchAndScrollController20&&this.$VideoWatchAndScrollController23.isState('playing'))this.$VideoWatchAndScrollController82();};x.prototype.$VideoWatchAndScrollController80=function(){'use strict';delete this.$VideoWatchAndScrollController37;var y=window.scrollY-this.$VideoWatchAndScrollController24,z=y>=this.$VideoWatchAndScrollController21,aa=z?1:y/this.$VideoWatchAndScrollController21,ba=this.$VideoWatchAndScrollController26.left+aa*(m-this.$VideoWatchAndScrollController26.left);ba-=window.scrollX;var ca=1-aa*(1-this.$VideoWatchAndScrollController22),da=ca*this.$VideoWatchAndScrollController33;this.$VideoWatchAndScrollController13.setState({left:Math.max(ba,m),top:Math.max(this.$VideoWatchAndScrollController25,o),width:ca*this.$VideoWatchAndScrollController32,height:da});if(z)this.$VideoWatchAndScrollController53();};x.prototype.$VideoWatchAndScrollController74=function(y){'use strict';window.removeEventListener('scroll',this.$VideoWatchAndScrollController31);this.$VideoWatchAndScrollController31=y||null;window.addEventListener('scroll',this.$VideoWatchAndScrollController31);c('cancelAnimationFrame')(this.$VideoWatchAndScrollController37);delete this.$VideoWatchAndScrollController37;};x.prototype.$VideoWatchAndScrollController53=function(){'use strict';this.$VideoWatchAndScrollController23&&this.$VideoWatchAndScrollController23.emit('unpreventWNSOverlay');window.removeEventListener('resize',this.$VideoWatchAndScrollController30);this.$VideoWatchAndScrollController74();if(this.$VideoWatchAndScrollController19)this.$VideoWatchAndScrollController81();if(this.$VideoWatchAndScrollController20){c('CSS').removeClass(this.$VideoWatchAndScrollController76(),"_5h98");this.$VideoWatchAndScrollController82();}delete this.$VideoWatchAndScrollController23;this.$VideoWatchAndScrollController52();this.$VideoWatchAndScrollController34=false;};x.prototype.$VideoWatchAndScrollController81=function(){'use strict';c('CSS').removeClass(this.$VideoWatchAndScrollController23.getRootNode(),"_5h9g");if(this.$VideoWatchAndScrollController29){this.$VideoWatchAndScrollController29.release();delete this.$VideoWatchAndScrollController29;}this.$VideoWatchAndScrollController19.remove();delete this.$VideoWatchAndScrollController19;};x.prototype.$VideoWatchAndScrollController82=function(){'use strict';this.$VideoWatchAndScrollController20.remove();delete this.$VideoWatchAndScrollController20;};x.prototype.$VideoWatchAndScrollController58=function(y){'use strict';this.$VideoWatchAndScrollController53();if(this.$VideoWatchAndScrollController5&&this.$VideoWatchAndScrollController15!==y){this.$VideoWatchAndScrollController27=y;this.$VideoWatchAndScrollController83();}else this.$VideoWatchAndScrollController57(y,c('VideoPlayerReason').USER);};x.prototype.$VideoWatchAndScrollController57=function(y,z,aa){'use strict';var ba=this.$VideoWatchAndScrollController1&&aa;if(ba){this.$VideoWatchAndScrollController42=0;this.$VideoWatchAndScrollController41=[];this.$VideoWatchAndScrollController44=[];this.$VideoWatchAndScrollController47=this.$VideoWatchAndScrollController16;this.$VideoWatchAndScrollController49=babelHelpers['extends']({},this.$VideoWatchAndScrollController9);this.$VideoWatchAndScrollController50=this.$VideoWatchAndScrollController18;this.$VideoWatchAndScrollController46=this.$VideoWatchAndScrollController13;this.$VideoWatchAndScrollController48=this.$VideoWatchAndScrollController2;this.$VideoWatchAndScrollController2=null;this.$VideoWatchAndScrollController12.remove();this.$VideoWatchAndScrollController17.remove();this.$VideoWatchAndScrollController36.release();this.$VideoWatchAndScrollController36=new (c('SubscriptionsHandler'))();}this.$VideoWatchAndScrollController16=y;this.$VideoWatchAndScrollController15=this.$VideoWatchAndScrollController42>0?this.$VideoWatchAndScrollController84(this.$VideoWatchAndScrollController42):y;if(this.$VideoWatchAndScrollController41.length>this.$VideoWatchAndScrollController42)this.$VideoWatchAndScrollController84(this.$VideoWatchAndScrollController42+1).preload();this.$VideoWatchAndScrollController14=this.$VideoWatchAndScrollController15.getRootNode();var ca=!this.$VideoWatchAndScrollController15.isMuted(),da=!this.$VideoWatchAndScrollController1||this.$VideoWatchAndScrollController15.isState('playing'),ea=this.$VideoWatchAndScrollController1&&this.$VideoWatchAndScrollController15.isState('finished');if(!this.$VideoWatchAndScrollController1||ba){this.$VideoWatchAndScrollController9={videoRootNode:this.$VideoWatchAndScrollController14.parentNode,dimensions:c('DOMDimensions').getElementDimensions(this.$VideoWatchAndScrollController14)};this.$VideoWatchAndScrollController18=this.$VideoWatchAndScrollController85(this.$VideoWatchAndScrollController9.dimensions,this.$VideoWatchAndScrollController15.getVideoNode());if(!aa)this.$VideoWatchAndScrollController52(this.$VideoWatchAndScrollController14);c('DOM').insertAfter(this.$VideoWatchAndScrollController14,this.$VideoWatchAndScrollController18);this.$VideoWatchAndScrollController12=c('EventListener').listen(this.$VideoWatchAndScrollController14.parentNode,'click',function(){return this.$VideoWatchAndScrollController54();}.bind(this));this.$VideoWatchAndScrollController15.pause(c('VideoPlayerReason').USER);if(this.$VideoWatchAndScrollController15.isPlayerVersion('silvercity'))this.$VideoWatchAndScrollController15.detachRootNode();this.$VideoWatchAndScrollController15.setDimensions(this.$VideoWatchAndScrollController7,this.$VideoWatchAndScrollController6);this.$VideoWatchAndScrollController5=true;if(ba)this.$VideoWatchAndScrollController86();this.$VideoWatchAndScrollController13=this.$VideoWatchAndScrollController87();this.$VideoWatchAndScrollController17=this.$VideoWatchAndScrollController88(this.$VideoWatchAndScrollController15);}else{this.$VideoWatchAndScrollController15.pause(c('VideoPlayerReason').USER);this.$VideoWatchAndScrollController15.setDimensions(this.$VideoWatchAndScrollController13.state.width||this.$VideoWatchAndScrollController7,this.$VideoWatchAndScrollController13.state.height||this.$VideoWatchAndScrollController6);}da&&this.$VideoWatchAndScrollController15.play(z);ca&&this.$VideoWatchAndScrollController15.unmute();if(ea)this.$VideoWatchAndScrollController67(this.$VideoWatchAndScrollController15);this.$VideoWatchAndScrollController15.logEvent(c('VideoPlayerLoggerEvent').PLAYER_FORMAT_CHANGED,{player_format:'watch_scroll'});var fa=this.$VideoWatchAndScrollController38;if((!this.$VideoWatchAndScrollController1||ba)&&fa){fa.abandonRequest();fa.reset(y.getVideoID(),y.getVideoChannelID());this.$VideoWatchAndScrollController89();this.$VideoWatchAndScrollController56(y);}this.$VideoWatchAndScrollController1=true;};x.prototype.$VideoWatchAndScrollController56=function(y){'use strict';this.$VideoWatchAndScrollController36.addSubscriptions(this.$VideoWatchAndScrollController63(y),this.$VideoWatchAndScrollController88(y),y.addListener('VideoChannelController/enterChannel',function(){this.$VideoWatchAndScrollController36.release();}.bind(this)),y.addListener('WatchAndScroll/close',function(){this.$VideoWatchAndScrollController54();}.bind(this)),y.addListener('WatchAndScroll/overlayShown',function(){return this.$VideoWatchAndScrollController60();}.bind(this)),y.addListener('WatchAndScroll/overlayHidden',function(){return this.$VideoWatchAndScrollController61();}.bind(this)));};x.prototype.$VideoWatchAndScrollController90=function(){'use strict';this.$VideoWatchAndScrollController13.setState({endScreenShown:false});if(this.$VideoWatchAndScrollController15)this.$VideoWatchAndScrollController15.play(c('VideoPlayerReason').USER);};x.prototype.$VideoWatchAndScrollController68=function(){'use strict';if(this.$VideoWatchAndScrollController42>=this.$VideoWatchAndScrollController44.length)return null;var y=this.$VideoWatchAndScrollController44[this.$VideoWatchAndScrollController42],z=c('DOM').scry(y,"._38a5"),aa=z[0],ba=c('DOM').scry(y,"._2z1"),ca=ba[0],da=c('DOM').scry(y,"._38a3"),ea=da[0];if(!aa||!ea)return null;var fa=41,ga=1.7778;if(ea.style.height&&ea.style.width)ga=parseInt(ea.style.width,10)/parseInt(ea.style.height,10);var ha=fa*ga;c('DOM').setAttributes(y,{style:{width:ha+'px'}});c('DOM').setAttributes(ea,{style:{width:ha+'px',height:fa+'px'}});return {thumbnail:y,owner:aa.textContent,viewCount:ca&&ca.textContent};};x.prototype.$VideoWatchAndScrollController89=function(){'use strict';if(!this.$VideoWatchAndScrollController38)return;this.$VideoWatchAndScrollController38.fetchStories(true,function(y,z){if(!y||!y.length)return;var aa=this.$VideoWatchAndScrollController13.state.channelVideoElements.concat(y);this.$VideoWatchAndScrollController13.setState({channelVideoElements:aa},function(){setTimeout(function(){this.$VideoWatchAndScrollController84(this.$VideoWatchAndScrollController42+1).preload();}.bind(this));}.bind(this));this.$VideoWatchAndScrollController44=this.$VideoWatchAndScrollController44.concat(z);}.bind(this));};x.prototype.$VideoWatchAndScrollController84=function(y){'use strict';var z=this.$VideoWatchAndScrollController13.state.channelVideoElements,aa=[this.$VideoWatchAndScrollController16].concat(this.$VideoWatchAndScrollController41),ba=null;aa.forEach(function(ca){if(z[y].contains(ca.getRootNode()))ba=ca;});!ba?j(0):void 0;return ba;};x.prototype.$VideoWatchAndScrollController91=function(y){'use strict';this.$VideoWatchAndScrollController15.pause(c('VideoPlayerReason').USER);this.$VideoWatchAndScrollController15.abortLoading();this.$VideoWatchAndScrollController15=this.$VideoWatchAndScrollController84(this.$VideoWatchAndScrollController42);this.$VideoWatchAndScrollController14=this.$VideoWatchAndScrollController15.getRootNode();this.$VideoWatchAndScrollController13.setState({videoIndex:this.$VideoWatchAndScrollController42});if(!y){this.$VideoWatchAndScrollController15.play(c('VideoPlayerReason').AUTOPLAY);}else{var z=this.$VideoWatchAndScrollController15;setTimeout(function(){if(z===this.$VideoWatchAndScrollController15)this.$VideoWatchAndScrollController15.play(c('VideoPlayerReason').AUTOPLAY);}.bind(this),v);}if(this.$VideoWatchAndScrollController41.length<=this.$VideoWatchAndScrollController42){this.$VideoWatchAndScrollController89();}else this.$VideoWatchAndScrollController84(this.$VideoWatchAndScrollController42+1).preload();};x.prototype.$VideoWatchAndScrollController52=function(y){'use strict';var z=m;if(this.$VideoWatchAndScrollController11)z+=this.$VideoWatchAndScrollController11.scrollHeight;z=Math.max(z,o);if(y){var aa=y.scrollWidth,ba=y.scrollHeight,ca=this.$VideoWatchAndScrollController72(y),da=ca*ba/aa;this.$VideoWatchAndScrollController8.height=da;this.$VideoWatchAndScrollController8.width=ca;}else this.$VideoWatchAndScrollController8={height:this.$VideoWatchAndScrollController6,left:m,top:z,width:this.$VideoWatchAndScrollController7};};x.prototype.$VideoWatchAndScrollController88=function(y){'use strict';if(y)return y.addListener('stateChange',function(){var z=y.isState('finished')&&this.$VideoWatchAndScrollController41.length>this.$VideoWatchAndScrollController42;if(!c('VideoPlayerExperiments').autoplayWhenWNS&&(y.isState('playing')||this.$VideoWatchAndScrollController20||z)){c('VideoAutoplayControllerX').setShouldAutoplay(false);}else c('VideoAutoplayControllerX').setShouldAutoplay(true);}.bind(this));return null;};x.prototype.$VideoWatchAndScrollController85=function(y,z){'use strict';var aa=c('DOM').create('canvas',{className:"_308d"});aa.height=y.height;aa.width=y.width;if(aa.getContext&&aa.getContext('2d'))if(z instanceof window.HTMLVideoElement){var ba=new (c('VideoFrameBuffer'))(aa,z);ba.updateFrameBuffer();}return aa;};x.prototype.$VideoWatchAndScrollController54=function(){'use strict';if(this.$VideoWatchAndScrollController23)this.$VideoWatchAndScrollController53();this.$VideoWatchAndScrollController83();};x.prototype.$VideoWatchAndScrollController92=function(y,z,aa){'use strict';var ba=y.getOption('VideoWithLiveBroadcast','isLive');y.pause(c('VideoPlayerReason').USER);if(y.isPlayerVersion('silvercity'))y.detachRootNode();c('ReactDOM').unmountComponentAtNode(z);y.setDimensions(aa.dimensions.width,aa.dimensions.height);c('DOM').prependContent(aa.videoRootNode,y.getRootNode());y.logEvent(c('VideoPlayerLoggerEvent').PLAYER_FORMAT_CHANGED,{player_format:'inline'});if(ba){if(!y.isPlayerVersion('silvercity'))y.mute();y.play(c('VideoPlayerReason').USER);}};x.prototype.$VideoWatchAndScrollController86=function(){'use strict';!this.$VideoWatchAndScrollController5?j(0):void 0;!this.$VideoWatchAndScrollController46?j(0):void 0;this.$VideoWatchAndScrollController46.setState({fadeOut:true});this.$VideoWatchAndScrollController51=setTimeout(function(){if(this.$VideoWatchAndScrollController51)clearTimeout(this.$VideoWatchAndScrollController51);!this.$VideoWatchAndScrollController47?j(0):void 0;!this.$VideoWatchAndScrollController48?j(0):void 0;this.$VideoWatchAndScrollController92(this.$VideoWatchAndScrollController47,this.$VideoWatchAndScrollController48,this.$VideoWatchAndScrollController49);c('DOM').remove(this.$VideoWatchAndScrollController50);this.$VideoWatchAndScrollController50=null;}.bind(this),t);};x.prototype.$VideoWatchAndScrollController59=function(){'use strict';!this.$VideoWatchAndScrollController5?j(0):void 0;this.$VideoWatchAndScrollController38&&this.$VideoWatchAndScrollController38.abandonRequest();this.$VideoWatchAndScrollController42=0;this.$VideoWatchAndScrollController1=false;this.$VideoWatchAndScrollController92(this.$VideoWatchAndScrollController16,this.$VideoWatchAndScrollController76(),this.$VideoWatchAndScrollController9);c('DOM').remove(this.$VideoWatchAndScrollController18);this.$VideoWatchAndScrollController18=null;this.$VideoWatchAndScrollController12.remove();this.$VideoWatchAndScrollController17.remove();this.$VideoWatchAndScrollController36.release();this.$VideoWatchAndScrollController36=new (c('SubscriptionsHandler'))();this.$VideoWatchAndScrollController9={};this.$VideoWatchAndScrollController15=null;this.$VideoWatchAndScrollController16=null;this.$VideoWatchAndScrollController5=false;this.$VideoWatchAndScrollController41=[];this.$VideoWatchAndScrollController44=[];if(this.$VideoWatchAndScrollController51)clearTimeout(this.$VideoWatchAndScrollController51);if(this.$VideoWatchAndScrollController47&&this.$VideoWatchAndScrollController48&&this.$VideoWatchAndScrollController49)this.$VideoWatchAndScrollController92(this.$VideoWatchAndScrollController47,this.$VideoWatchAndScrollController48,this.$VideoWatchAndScrollController49);this.$VideoWatchAndScrollController47=null;this.$VideoWatchAndScrollController49={};if(this.$VideoWatchAndScrollController50){c('DOM').remove(this.$VideoWatchAndScrollController50);this.$VideoWatchAndScrollController50=null;}c('VideoAutoplayControllerX').setShouldAutoplay(true);this.$VideoWatchAndScrollController2=null;this.$VideoWatchAndScrollController3=null;if(this.$VideoWatchAndScrollController27){this.$VideoWatchAndScrollController57(this.$VideoWatchAndScrollController27,c('VideoPlayerReason').USER);this.$VideoWatchAndScrollController27=null;}this.$VideoWatchAndScrollController34=false;};x.prototype.$VideoWatchAndScrollController87=function(){'use strict';return c('ReactDOM').render(c('React').createElement(c('VideoWatchAndScrollContainer.react'),{initialPosition:this.$VideoWatchAndScrollController8,initialVideoElement:this.$VideoWatchAndScrollController14,onChannelNavigation:this.$VideoWatchAndScrollController93.bind(this),onClick:this.$VideoWatchAndScrollController94.bind(this),onDoubleClick:this.$VideoWatchAndScrollController95.bind(this),onDrop:this.$VideoWatchAndScrollController96.bind(this),onGrab:this.$VideoWatchAndScrollController97.bind(this),onInitialPositionUpdate:this.$VideoWatchAndScrollController98.bind(this),onReplay:this.$VideoWatchAndScrollController90.bind(this)}),this.$VideoWatchAndScrollController76());};x.prototype.$VideoWatchAndScrollController60=function(){'use strict';if(!this.$VideoWatchAndScrollController15||!this.$VideoWatchAndScrollController13||this.$VideoWatchAndScrollController43)return;this.$VideoWatchAndScrollController13.setState({overlayShown:true});};x.prototype.$VideoWatchAndScrollController61=function(){'use strict';if(!this.$VideoWatchAndScrollController15||!this.$VideoWatchAndScrollController13||this.$VideoWatchAndScrollController43)return;this.$VideoWatchAndScrollController13.setState({overlayShown:false});};x.prototype.$VideoWatchAndScrollController83=function(){'use strict';if(this.$VideoWatchAndScrollController16)this.$VideoWatchAndScrollController16.emit('exitWatchAndScroll');};x.prototype.$VideoWatchAndScrollController93=function(y){'use strict';if(y>0&&this.$VideoWatchAndScrollController41.length<=this.$VideoWatchAndScrollController42)return;this.$VideoWatchAndScrollController42+=y;this.$VideoWatchAndScrollController91(true);};x.prototype.$VideoWatchAndScrollController97=function(){'use strict';if(this.$VideoWatchAndScrollController23)this.$VideoWatchAndScrollController53();var y=this.$VideoWatchAndScrollController15.getOption('VideoWithLiveBroadcast','isLive');if(y)return;this.$VideoWatchAndScrollController28=this.$VideoWatchAndScrollController15.isState('playing');this.$VideoWatchAndScrollController15.pause(c('VideoPlayerReason').USER);};x.prototype.$VideoWatchAndScrollController96=function(){'use strict';var y=this.$VideoWatchAndScrollController15.getOption('VideoWithLiveBroadcast','isLive');if(y)return;if(this.$VideoWatchAndScrollController28)this.$VideoWatchAndScrollController15.play(c('VideoPlayerReason').USER);this.$VideoWatchAndScrollController28=null;};x.prototype.$VideoWatchAndScrollController94=function(){'use strict';var y=this.$VideoWatchAndScrollController15.getOption('VideoWithLiveBroadcast','isLive');if(this.$VideoWatchAndScrollController23||y)return;if(this.$VideoWatchAndScrollController15.isState('playing')){this.$VideoWatchAndScrollController15.pause(c('VideoPlayerReason').USER);}else if(this.$VideoWatchAndScrollController15.isState('paused')||this.$VideoWatchAndScrollController15.isState('finished')||this.$VideoWatchAndScrollController15.isState('ready'))this.$VideoWatchAndScrollController15.play(c('VideoPlayerReason').USER);};x.prototype.$VideoWatchAndScrollController95=function(){'use strict';if(this.$VideoWatchAndScrollController23)return;var y=this.$VideoWatchAndScrollController15.getOption('VideoWithClickToChannelView','isChannelEligible');if(!this.$VideoWatchAndScrollController1&&(!y||!this.$VideoWatchAndScrollController40))return;c('Bootloader').loadModules(["VideoChannelController"],function(z){this.$VideoWatchAndScrollController66();z.openFromVideoPlayer(this.$VideoWatchAndScrollController15,this.$VideoWatchAndScrollController15.getVideoChannelID(),this.$VideoWatchAndScrollController39,this.$VideoWatchAndScrollController65());}.bind(this));};x.prototype.$VideoWatchAndScrollController98=function(y){'use strict';this.$VideoWatchAndScrollController8=y;this.$VideoWatchAndScrollController15.setDimensions(y.width,y.height);};x.prototype.$VideoWatchAndScrollController99=function(){'use strict';var y=c('DOM').create('div');c('DOM').appendContent(document.body,y);return y;};x.prototype.$VideoWatchAndScrollController76=function(){'use strict';if(!this.$VideoWatchAndScrollController2)this.$VideoWatchAndScrollController2=this.$VideoWatchAndScrollController99();return this.$VideoWatchAndScrollController2;};f.exports=x;},null);
__d('VideoChannelController',['csx','cx','fbt','Arbiter','CSS','DOM','DOMDimensions','DialogX','Event','FBLinkDisplayTime','Image.react','LayerDestroyOnHide','LayerHideOnEscape','LayerHideOnTransition','React','ReactDOM','StreamViewportTracking','Style','SubscriptionsHandler','VideoAutoplayControllerX','VideoChainingCaller','VideoChannel','VideoChannelLogger','VideoChannelLoggerEventTargets','VideoChannelLoggerEvents','VideoChannelLoggerFields','VideoChannelStoryFetcher','VideoHomeCarousel','VideoPlayerAbortLoadingExperiment','VideoPlayerExperiments','VideoPlayerReason','VideoStripThumbnailCarousel.react','VideoWatchAndScrollController','ViewportTrackingConfig','collectDataAttributes','getElementPosition','getVendorPrefixedName','getViewportDimensions','setImmediate','throttle','StreamingReactionsTrayEvents'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=560,l=1060,m=.1,n=1080,o=300,p=480,q=2160,r=3840,s=600;function t(u,v,w,x,y,z){'use strict';this.$VideoChannelController1=u;this.$VideoChannelController2=v;this.$VideoChannelController3=w;this.$VideoChannelController31=z;this.$VideoChannelController4=[];this.$VideoChannelController13=new (c('SubscriptionsHandler'))();this.$VideoChannelController22=false;this.$VideoChannelController32();this.$VideoChannelController23=true;this.$VideoChannelController5=false;this.$VideoChannelController6=null;this.$VideoChannelController33();this.$VideoChannelController25=!!y;this.$VideoChannelController26=[];this.$VideoChannelController27=[];this.$VideoChannelController28=0;this.$VideoChannelController30=new (c('StreamViewportTracking'))();this.$VideoChannelController30.init(c('ViewportTrackingConfig'),this.$VideoChannelController8);c('VideoChannelLogger').startSession(w,u,v);var aa=null;if(x){this.$VideoChannelController22=true;this.$VideoChannelController5=x.isAd();this.$VideoChannelController6=x.getAdClientToken();var ba=x.getRootNode();aa=c('collectDataAttributes')(ba,['ft']);this.$VideoChannelController11=c('DOMDimensions').getElementDimensions(ba);var ca=c('getElementPosition')(ba);x.setIsInChannel(true);if(!this.$VideoChannelController25)this.$VideoChannelController34(x);this.$VideoChannelController35(ca,x);x.emit('VideoChannelController/enterChannel',{videoWidth:this.$VideoChannelController18,videoHeight:this.$VideoChannelController17});c('VideoAutoplayControllerX').setShouldAutoplay(false);x.play(c('VideoPlayerReason').USER);x.unmute();this.$VideoChannelController4.push(x);}else this.$VideoChannelController36();if(y){this.$VideoChannelController27=y.videoPlayerControllers;this.$VideoChannelController28=y.channelVideoIndex;this.$VideoChannelController26=y.channelInteractionsToRegister;this.$VideoChannelController29=y.rootVideoPlayerController;this.$VideoChannelController29.setIsInChannel(true);if(y.storyFetcher)this.$VideoChannelController24=y.storyFetcher;}if(!this.$VideoChannelController24)this.$VideoChannelController24=new (c('VideoChannelStoryFetcher'))(this.$VideoChannelController3,this.$VideoChannelController1,v,this.$VideoChannelController6,c('VideoHomeCarousel').getChannelInfoMap()[this.$VideoChannelController1]);this.$VideoChannelController13.addSubscriptions(c('Event').listen(window,'resize',c('throttle')(this.$VideoChannelController37.bind(this),200)));this.$VideoChannelController24.fetchFirstStory(this.$VideoChannelController22,aa,this.$VideoChannelController28>0);c('Arbiter').inform('VideoChannelView/opened');}t.prototype.getWnsChannelVideoIndex=function(){'use strict';return this.$VideoChannelController28;};t.prototype.getViewportTracker=function(){'use strict';return this.$VideoChannelController30;};t.prototype.isOpen=function(){'use strict';return this.$VideoChannelController23;};t.prototype.$VideoChannelController37=function(event){'use strict';this.$VideoChannelController32();c('Arbiter').inform(c('StreamingReactionsTrayEvents').ResizeChannelViewWindow,{videoWidth:this.$VideoChannelController18,videoHeight:this.$VideoChannelController17});};t.prototype.$VideoChannelController32=function(){'use strict';var u=c('getViewportDimensions').withoutScrollbars();if(!this.$VideoChannelController14||this.$VideoChannelController14.width!==u.width||this.$VideoChannelController14.height!==u.height){this.$VideoChannelController14=u;this.$VideoChannelController15=Math.max(k,u.height);this.$VideoChannelController16=Math.max(l,u.width);var v=m*(Math.min(n,this.$VideoChannelController15)-k);if(this.isFromAd())v=0;var w=o+v*2,x=Math.min(q,this.$VideoChannelController15-w),y=Math.min(r,this.$VideoChannelController16-p),z=Math.min(x,y*9/16),aa=Math.min(y,x*16/9);this.setVideoDimensions(aa,z,v);if(this.$VideoChannelController12)this.$VideoChannelController12.onWindowResize();}};t.prototype.registerVideoController=function(u){'use strict';if(this.$VideoChannelController4.includes(u))return;this.$VideoChannelController4.push(u);u.setDimensions(this.$VideoChannelController18,this.$VideoChannelController17);};t.prototype.setVideoDimensions=function(u,v,w){'use strict';this.$VideoChannelController18=u;this.$VideoChannelController17=v;this.$VideoChannelController19=w;this.$VideoChannelController4.forEach(function(x){x.setDimensions(this.$VideoChannelController18,this.$VideoChannelController17);}.bind(this));};t.prototype.findVideoControllerForStory=function(u){'use strict';return this.$VideoChannelController4.find(function(v){if(u.contains(v.getRootNode()))return true;return false;});};t.prototype.getVideoControllers=function(){'use strict';return this.$VideoChannelController4;};t.prototype.getAvailableHeight=function(){'use strict';return this.$VideoChannelController38()-this.$VideoChannelController39();};t.prototype.$VideoChannelController38=function(){'use strict';return this.$VideoChannelController15;};t.prototype.$VideoChannelController39=function(){'use strict';if(this.isFromAd())return 0;return c('VideoStripThumbnailCarousel.react').getVideoStripHeight(this.$VideoChannelController40(),this.getExtraThumbnailHeight());};t.prototype.getAvailableWidth=function(){'use strict';return this.$VideoChannelController40();};t.prototype.$VideoChannelController40=function(){'use strict';return this.$VideoChannelController16;};t.prototype.getVideoHeight=function(){'use strict';return this.$VideoChannelController17;};t.prototype.getVideoWidth=function(){'use strict';return this.$VideoChannelController18;};t.prototype.getExtraThumbnailHeight=function(){'use strict';return this.$VideoChannelController19;};t.prototype.getOriginalVideoPlayerController=function(){'use strict';if(this.$VideoChannelController22)return this.$VideoChannelController4[0];return null;};t.prototype.getWNSRootVideoPlayerController=function(){'use strict';return this.$VideoChannelController29;};t.prototype.getDialog=function(){'use strict';return this.$VideoChannelController7;};t.prototype.getDialogContent=function(){'use strict';return this.$VideoChannelController8;};t.prototype.getInteraction=function(){'use strict';return this.$VideoChannelController12;};t.prototype.setInteraction=function(u){'use strict';this.$VideoChannelController12=u;};t.prototype.registerWNSVideoControllers=function(){'use strict';var u=this.$VideoChannelController12;if(!u)return;var v=this.$VideoChannelController27;if(v&&v.length){v.forEach(function(w){u.registerVideoController(w);});this.$VideoChannelController27=[];}};t.prototype.registerChannelInteractionsFromWNS=function(){'use strict';var u=this.$VideoChannelController12;if(!u)return;this.$VideoChannelController26.forEach(function(v){v();});this.$VideoChannelController26=[];};t.prototype.getStoryFetcher=function(){'use strict';return this.$VideoChannelController24;};t.prototype.fetchStories=function(u,v,w){'use strict';this.$VideoChannelController24.fetchStories(u,v,w);};t.prototype.hideLoadingState=function(){'use strict';if(this.$VideoChannelController20){c('DOM').remove(this.$VideoChannelController20);this.$VideoChannelController20=null;}if(this.$VideoChannelController21){c('DOM').remove(this.$VideoChannelController21);this.$VideoChannelController21=null;}};t.prototype.$VideoChannelController36=function(){'use strict';this.$VideoChannelController20=c('DOM').create('div',{className:"_5tl5"});c('DOM').appendContent(document.body,this.$VideoChannelController20);var u=(this.getAvailableHeight()-this.getVideoHeight())/2,v=(this.$VideoChannelController40()-this.getVideoWidth())/2;c('Style').set(this.$VideoChannelController20,'height',this.getVideoHeight()+'px');c('Style').set(this.$VideoChannelController20,'width',this.getVideoWidth()+'px');c('Style').set(this.$VideoChannelController20,'left',v+'px');c('Style').set(this.$VideoChannelController20,'top',u+'px');};t.prototype.$VideoChannelController34=function(u){'use strict';var v=u.getRootNode();this.$VideoChannelController9=c('DOM').create('div',{className:"_344x"});this.$VideoChannelController9.style.height=this.$VideoChannelController11.height+'px';this.$VideoChannelController9.style.width=this.$VideoChannelController11.width+'px';c('DOM').insertAfter(v,this.$VideoChannelController9);};t.prototype.$VideoChannelController33=function(){'use strict';var u={fixedTopPosition:0,width:l,xui:true,addedBehaviors:[c('LayerDestroyOnHide'),c('LayerHideOnEscape'),c('LayerHideOnTransition')]},v=c('DOM').create('div');c('ReactDOM').render(c('React').createElement('a',{className:"_5tl7",href:'#'},c('React').createElement(c('Image.react'),{alt:j._("Close"),src:'/images/video/channel_view/close.png'})),v);var w=new (c('DialogX'))(u,v);c('CSS').addClass(w.getRoot(),"_19u-");c('Style').set(w.getContentRoot(),'width','100%');this.$VideoChannelController7=w;this.$VideoChannelController8=v;this.$VideoChannelController10=w.subscribe('hide',this.$VideoChannelController41.bind(this));w.show();var x=c('DOM').find(v,"._5tl7"),y=c('DOM').find(w.getRoot(),"._3ixn");this.$VideoChannelController13.addSubscriptions(c('Event').listen(x,'click',this.$VideoChannelController42.bind(this)),c('Event').listen(y,'click',this.$VideoChannelController43.bind(this)));};t.prototype.$VideoChannelController44=function(u){'use strict';var v={};v[c('VideoChannelLoggerFields').EVENT]=c('VideoChannelLoggerEvents').CLICK;v[c('VideoChannelLoggerFields').EVENT_TARGET]=u;c('VideoChannelLogger').log(v);};t.prototype.$VideoChannelController43=function(event){'use strict';this.$VideoChannelController44(c('VideoChannelLoggerEventTargets').WASH);this.$VideoChannelController7.hide();};t.prototype.$VideoChannelController42=function(event){'use strict';this.$VideoChannelController44(c('VideoChannelLoggerEventTargets').CLOSE);this.$VideoChannelController7.hide();event.preventDefault();};t.prototype.$VideoChannelController35=function(u,v){'use strict';var w=c('DOM').create('div',{className:"_5tl9"});this.$VideoChannelController21=w;c('DOM').appendContent(this.$VideoChannelController8,w);var x=v.getRootNode();c('DOM').appendContent(w,x);var y=u.width,z=u.height;z*=this.getVideoWidth()/y;y=this.getVideoWidth();if(z>this.getVideoHeight()){y*=this.getVideoHeight()/z;z=this.getVideoHeight();}var aa=(this.getAvailableHeight()-this.getVideoHeight())/2,ba=(this.$VideoChannelController40()-this.getVideoWidth())/2,ca=(this.getVideoHeight()-z)/2,da=(this.getVideoWidth()-y)/2,ea=u.y-aa-ca,fa=u.x-ba-da,ga=u.width/y;c('Style').set(w,c('getVendorPrefixedName')('transform'),'translate('+fa+'px,'+ea+'px) scale('+ga+')');c('Style').set(w,'left',ba+'px');c('Style').set(w,'top',aa+'px');c('Style').set(w,'padding',ca+'px '+da+'px');v.setDimensions(y,z);if(this.isFromAd()&&y>s&&!v.isHD()&&v.hasHD())v.toggleHD();w.offsetWidth;c('Style').set(w,'transition','all .35s cubic-bezier(.46,.22,.36,1) .1s');c('Style').set(w,c('getVendorPrefixedName')('transform'),'none');};t.prototype.$VideoChannelController41=function(){'use strict';if(!this.isOpen())return;this.close();};t.prototype.isFromAd=function(){'use strict';return this.$VideoChannelController5;};t.prototype.getAdClientToken=function(){'use strict';return this.$VideoChannelController6;};t.prototype.getVideoChainingCaller=function(){'use strict';return this.$VideoChannelController2;};t.prototype.hasNext=function(){'use strict';return this.$VideoChannelController24.hasNext();};t.prototype.close=function(){var u=this;'use strict';if(!this.$VideoChannelController23)return;this.$VideoChannelController23=false;this.$VideoChannelController30.updateTimeTrackingData(true);var v=this.$VideoChannelController12,w=0;if(this.$VideoChannelController25)w=v?v.getCurrentAbsoluteIndex():0;var x=this.$VideoChannelController25&&v?v.getVideoController():this.$VideoChannelController4[w];if(this.$VideoChannelController22){var y=true;if(x.isState('finished'))y=false;if((!v||v.isCenterVideoActive())&&x.isState('paused'))y=false;this.$VideoChannelController4.forEach(function(ca){ca.setIsInChannel(false);});if(this.$VideoChannelController25){(function(){var ca=u.$VideoChannelController4;if(v)(function(){var ha={};ca.forEach(function(ia){var ja=v.findStoryForVideoController(ia);if(ja){var ka=v.getStoryIndex(ja);ha[ia.getVideoID()]=ka;}});ca.sort(function(ia,ja){var ka=ha[ia.getVideoID()],la=ha[ja.getVideoID()];return ka-la;});})();var da=c('VideoWatchAndScrollController').getReactContainer();if(da){var ea=u.$VideoChannelController24.getPreloadedData(),fa=ea.stories;da.setState({channelVideoElements:[]});var ga=[ca[0].getRootNode()].concat(fa);da.setState({channelVideoElements:ga,videoIndex:w},function(){c('VideoWatchAndScrollController').resetFromChannelView(this.$VideoChannelController24,ca,w);}.bind(u));}})();}else{var z=x.getRootNode();c('DOM').insertAfter(this.$VideoChannelController9,z);c('DOM').remove(this.$VideoChannelController9);if(!x.isState('fallback'))x.setDimensions(this.$VideoChannelController11.width,this.$VideoChannelController11.height);}if(y&&!this.$VideoChannelController25){x.pause(c('VideoPlayerReason').AUTOPLAY);if(!c('VideoPlayerExperiments').keepVolumeOnAfterChannelExit)x.mute();x.emit('resumeAutoplay');}x.emit('VideoChannelController/exitChannel');}else if(!this.$VideoChannelController25)x=null;for(var aa=0;aa<this.$VideoChannelController4.length;aa++){var ba=this.$VideoChannelController4[aa];if(x!==ba){ba.pause(c('VideoPlayerReason').USER);if(!this.$VideoChannelController25&&c('VideoPlayerAbortLoadingExperiment').canAbort)ba.abortLoading();if(!this.$VideoChannelController25)ba.detachRootNode();}}this.hideLoadingState();if(this.$VideoChannelController12)this.$VideoChannelController12.onChannelClose();this.$VideoChannelController7.hide();this.$VideoChannelController10.unsubscribe();this.$VideoChannelController13.release();this.$VideoChannelController24.abandonRequest();c('VideoChannelLogger').endSession();c('Arbiter').inform('VideoChannelView/closed');c('VideoAutoplayControllerX').setShouldAutoplay(true);c('VideoChannel').set(null);if(this.$VideoChannelController31)this.$VideoChannelController31();};t.registerLink=function(u,v,w,x){'use strict';function y(){if(c('VideoChannel').get()){c('VideoChannel').get().getDialog().hide();c('setImmediate')(y);return;}c('VideoChannel').set(new t(w,x,v,null));}c('Event').listen(u,'click',function(event){y();event.preventDefault();});var z=c('FBLinkDisplayTime').isClicked(u);c('FBLinkDisplayTime').unregister(u);if(z)y();};t.openFromVideoPlayer=function(u,v,w,x){'use strict';if(u.isState('fallback'))return;if(c('VideoChannel').get())c('VideoChannel').get().getDialog().hide();c('VideoChannel').set(new t(v,w,u.getVideoID(),u.isPlayerVersion('silvercity')?null:u,x));};t.getVideoChannel=function(){'use strict';return c('VideoChannel').get();};t.isChannelActive=function(){'use strict';return !!c('VideoChannel').get();};f.exports=t;},null);